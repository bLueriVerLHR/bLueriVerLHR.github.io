<!DOCTYPE html>
<html>
  <head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
  <meta name="description" content="A small world of BlueRiver">
  <meta name="keyword" content="hexo-theme, vuejs">
  <title>
    
      代码测试 | --&amp;~ World of Blue_River ~&amp;--
    
  </title>
  <link href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <link href="//cdnjs.cloudflare.com/ajax/libs/nprogress/0.2.0/nprogress.min.css" rel="stylesheet">
  <link href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/tomorrow.min.css" rel="stylesheet">
  
<link rel="stylesheet" href="/css/style.css">

  
  <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/geopattern/1.2.3/js/geopattern.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/nprogress/0.2.0/nprogress.min.js"></script>
  
    
<script src="/js/qrious.js"></script>

  
  
  
  
    <!-- MathJax support START -->
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <!-- MathJax support END -->
  


  
  
    
<script src="/js/local-search.js"></script>


<meta name="generator" content="Hexo 5.4.0"></head>
  <body>
    <header class="header fixed-header">
  <div class="header-container">
    <a class="home-link" href="/">
      <span>--&~ World of Blue_River ~&--</span>
    </a>
    <ul class="right-list">
      
        <li class="list-item">
          
            <a href="/" class="item-link">Home</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/series/" class="item-link">Series</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/tags/" class="item-link">Tags</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/archives/" class="item-link">Archives</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/jsgames/" class="item-link">Jsgames</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/about/" class="item-link">About</a>
          
        </li>
      
      
        <li class="menu-item menu-item-search right-list">
    <a role="button" class="popup-trigger">
        <i class="fa fa-search fa-fw"></i>
    </a>
</li>
      
    </ul>
    <div class="menu">
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </div>
    <div class="menu-mask">
      <ul class="menu-list">
        
          <li class="menu-item">
            
              <a href="/" class="menu-link">Home</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/series/" class="menu-link">Series</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/tags/" class="menu-link">Tags</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/archives/" class="menu-link">Archives</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/jsgames/" class="menu-link">Jsgames</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/about/" class="menu-link">About</a>
            
          </li>
        
      </ul>
    </div>
    
      <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
            <span class="search-icon">
                <i class="fa fa-search"></i>
            </span>
            <div class="search-input-container">
                <input autocomplete="off" autocapitalize="off"
                    placeholder="Please enter your keyword(s) to search." spellcheck="false"
                    type="search" class="search-input">
            </div>
            <span class="popup-btn-close">
                <i class="fa fa-times-circle"></i>
            </span>
        </div>
        <div id="search-result">
            <div id="no-result">
                <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
            </div>
        </div>
    </div>
</div>
    
  </div>
</header>

    <div id="article-banner">
  <h2>代码测试</h2>
  <p class="post-date">2021-07-31</p>
  <div class="arrow-down">
    <a href="javascript:;"></a>
  </div>
</div>
<main class="app-body flex-box">
  <!-- Article START -->
  <article class="post-article">
    <section class="markdown-content"><p>一些代码小例子，不遵循个人代码规范。</p>
<span id="more"></span>

<hr>
<h2 id="C-解多元一次方程组"><a href="#C-解多元一次方程组" class="headerlink" title="C-解多元一次方程组"></a>C-解多元一次方程组</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;time.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Start</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Nice to meet you,doctor.\n&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;What do you wanne do today?\n&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Do you wanne calculate a system of first order equations of multiple variables.\n&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Or you wanna DO with me?|\&#x27;v \&#x27;)\n&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Chose what you wanna to do.(/(///v///)/)\n\n&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;0.Qiut.   1.Calculation.   2.DO with me?\n&quot;</span>);</span><br><span class="line">    <span class="keyword">while</span>(<span class="number">1</span>)&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n) == <span class="number">1</span> &amp;&amp; n &lt; <span class="number">4</span> &amp;&amp; n &gt; <span class="number">-1</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> n;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;You should have replied to me with 1,2 or...0.(; _ ;)\n&quot;</span>);</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;Please respond to me again.\n&quot;</span>);</span><br><span class="line">            getchar();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    getchar();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">DefM</span><span class="params">(<span class="keyword">int</span> Matrix[],<span class="keyword">int</span> row,<span class="keyword">int</span> column)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i_BR = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">char</span> c_BR;</span><br><span class="line">    <span class="keyword">while</span>(i_BR)&#123;</span><br><span class="line">        i_BR = <span class="number">1</span>;</span><br><span class="line">        getchar();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i &lt; row;i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> k = <span class="number">0</span>;k &lt; column;k++)&#123;</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;Please Enter the number in %d row and %d column:&quot;</span>,i+<span class="number">1</span>,k+<span class="number">1</span>);</span><br><span class="line">                <span class="keyword">while</span> (<span class="built_in">scanf</span>(<span class="string">&quot; %d&quot;</span>, &amp;Matrix[column*i+k]) != <span class="number">1</span>) &#123;</span><br><span class="line">                    <span class="keyword">while</span> ((c_BR = getchar()) != <span class="string">&#x27;\n&#x27;</span>)  <span class="built_in">putchar</span>(c_BR);</span><br><span class="line">                    <span class="built_in">printf</span>(<span class="string">&quot; is not an integer.Please enter an integer value, such as 25, -178, or 3: &quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span>(k == (column - <span class="number">1</span>))</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;The Matrix is like the following output.\n&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i &lt; row;i++)&#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;\t|\t&quot;</span>);</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> k = <span class="number">0</span>;k &lt; column;k++)&#123;</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;%d\t&quot;</span>,Matrix[column*i+k]);</span><br><span class="line">                <span class="keyword">if</span>(k == (column - <span class="number">1</span>))</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;|\n&quot;</span>);</span><br><span class="line">             &#125;</span><br><span class="line">        &#125;  </span><br><span class="line">        getchar();</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;\n\nIs the Matrix the one you expected?\nIf so,enter 1 to continue.\nIf not,enter 0 to define it again.\n&quot;</span>);</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%c&quot;</span>,&amp;c_BR);</span><br><span class="line">        <span class="keyword">while</span>(i_BR == <span class="number">1</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span>(c_BR == <span class="string">&#x27;1&#x27;</span>)</span><br><span class="line">            i_BR = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(c_BR == <span class="string">&#x27;0&#x27;</span>)&#123;</span><br><span class="line">                system(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;Now recreat it.\n&quot;</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                getchar();</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;please do not enter an irrelevant character.\nAnswer me again:&quot;</span>);</span><br><span class="line">                <span class="built_in">scanf</span>(<span class="string">&quot;%c&quot;</span>,&amp;c_BR);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">     </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">VarNum</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> m = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Tell me how many variables you want to cope with?\n&quot;</span>);</span><br><span class="line">    <span class="keyword">while</span>(<span class="number">1</span>)&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n))&#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;Is %d the number of the variables you want to cope with?\n&quot;</span>,n);</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;If it is,please enter 1.If not,enter 0 to rewrite it.\n&quot;</span>);</span><br><span class="line">            getchar();</span><br><span class="line">            <span class="keyword">if</span>(<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;m))&#123;</span><br><span class="line">                <span class="keyword">if</span>(m)&#123;</span><br><span class="line">                    <span class="keyword">return</span> n;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span>&#123;</span><br><span class="line">                    <span class="built_in">printf</span>(<span class="string">&quot;Rewrite it!&quot;</span>);</span><br><span class="line">                    getchar();</span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;You should enter an integer which is either 1 or 0.\n&quot;</span>);</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;And now you exit.\nYou should enter again.\n\n&quot;</span>);</span><br><span class="line">                <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;Please enter an integer.\n&quot;</span>);</span><br><span class="line">            getchar();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Calcu3Det</span><span class="params">(<span class="keyword">int</span> MainMatrix[])</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> PositiveProduct[<span class="number">3</span>],NegativeProduct[<span class="number">3</span>],PositiveSum = <span class="number">0</span>,NegativeSum = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> k = <span class="number">0</span>;k &lt; <span class="number">3</span>;k++) PositiveProduct[k] = NegativeProduct[k] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> k = <span class="number">0</span>;k &lt; <span class="number">3</span>;k++)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i &lt; <span class="number">3</span>;i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>( (<span class="number">3</span>*i+i+k) &gt;= (<span class="number">3</span>*(i+<span class="number">1</span>))) PositiveProduct[k] *= MainMatrix[<span class="number">3</span>*i+i+k<span class="number">-3</span>];</span><br><span class="line">            <span class="keyword">else</span> PositiveProduct[k] *= MainMatrix[<span class="number">3</span>*i+i+k];</span><br><span class="line">            <span class="keyword">if</span>( (<span class="number">3</span>*i+<span class="number">2</span>-i+k) &gt;= (<span class="number">3</span>*(i+<span class="number">1</span>))) NegativeProduct[k] *= MainMatrix[<span class="number">3</span>*i<span class="number">-1</span>-i+k];</span><br><span class="line">            <span class="keyword">else</span> NegativeProduct[k] *= MainMatrix[<span class="number">3</span>*i+<span class="number">2</span>-i+k];</span><br><span class="line">        &#125;</span><br><span class="line">        PositiveSum += PositiveProduct[k];</span><br><span class="line">        NegativeSum += NegativeProduct[k];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> PositiveSum - NegativeSum;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">CalcuHiDet</span><span class="params">(<span class="keyword">int</span> MainMatrix[],<span class="keyword">int</span> X)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> sum;</span><br><span class="line">    sum = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span>(X == <span class="number">3</span>) sum = Calcu3Det(MainMatrix);</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(X &gt; <span class="number">3</span>)&#123;</span><br><span class="line">        <span class="keyword">int</span> * AssoMatrix = (<span class="keyword">int</span> *)<span class="built_in">malloc</span>((X<span class="number">-1</span>)*(X<span class="number">-1</span>)*<span class="keyword">sizeof</span>(<span class="keyword">int</span>));</span><br><span class="line">        <span class="keyword">int</span> counter = <span class="number">0</span>,sign;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> c = <span class="number">0</span>;c &lt; X;c++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> k = <span class="number">1</span>;k &lt; X;k++)&#123;</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i &lt; X;i++)&#123;</span><br><span class="line">                    <span class="keyword">if</span>(i &lt; c) AssoMatrix[(k<span class="number">-1</span>)*(X<span class="number">-1</span>)+i] = MainMatrix[X*k+i];</span><br><span class="line">                    <span class="keyword">else</span> <span class="keyword">if</span>(i &gt; c) AssoMatrix[(k<span class="number">-1</span>)*(X<span class="number">-1</span>)+i<span class="number">-1</span>] = MainMatrix[X*k+i];</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            counter = CalcuHiDet(AssoMatrix,X<span class="number">-1</span>);</span><br><span class="line">            sign = ((<span class="number">2</span>+c)%<span class="number">2</span>)?<span class="number">-1</span>:<span class="number">1</span>;</span><br><span class="line">            sum += MainMatrix[c]*sign*counter;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> sum;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">CopM</span><span class="params">(<span class="keyword">int</span> MainMatrix[],<span class="keyword">int</span> row,<span class="keyword">int</span> column,<span class="keyword">int</span> AssociateMatrix[])</span></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> k = <span class="number">0</span>;k &lt; row*column;k++) AssociateMatrix[k] = MainMatrix[k];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">ChangeC</span><span class="params">(<span class="keyword">int</span> Matrix[],<span class="keyword">int</span> row,<span class="keyword">int</span> column,<span class="keyword">int</span> ColumnMatrix[],<span class="keyword">int</span> ChangedColumn)</span></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> k = <span class="number">0</span>;k &lt; row;k++) Matrix[row*k + ChangedColumn<span class="number">-1</span>] = ColumnMatrix[k];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Calculation</span><span class="params">(<span class="keyword">int</span> MainMatrix[],<span class="keyword">int</span> Column[],<span class="keyword">int</span> n)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> D;</span><br><span class="line">    <span class="keyword">int</span> * AssoMatrix = (<span class="keyword">int</span> *)<span class="built_in">malloc</span>(n*n*<span class="keyword">sizeof</span>(<span class="keyword">int</span>));</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i &lt; n;i++)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> k = <span class="number">0</span>;k &lt; n+<span class="number">1</span>;k++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(MainMatrix[n*i+k] == <span class="number">0</span>) <span class="built_in">printf</span>(<span class="string">&quot;\t&quot;</span>);</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(k &lt; n - <span class="number">1</span>) <span class="built_in">printf</span>(<span class="string">&quot;\t%d X%d +&quot;</span>,MainMatrix[n*i+k],k+<span class="number">1</span>);</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(k == n <span class="number">-1</span>) <span class="built_in">printf</span>(<span class="string">&quot;\t%d X%d =&quot;</span>,MainMatrix[n*i+k],k+<span class="number">1</span>);</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(k == n) <span class="built_in">printf</span>(<span class="string">&quot;\t%d\n&quot;</span>,Column[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;The system above have &quot;</span>);</span><br><span class="line">    <span class="keyword">if</span>((D = CalcuHiDet(MainMatrix,n)) == <span class="number">0</span>) <span class="built_in">printf</span>(<span class="string">&quot;NO exact roots.&quot;</span>);</span><br><span class="line">    <span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;roots.\nD = %d\n&quot;</span>,D);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i &lt; n;i++)&#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;X%d = D%d/D\t   &quot;</span>,i+<span class="number">1</span>,i+<span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i &lt; n;i++)&#123;</span><br><span class="line">            CopM(MainMatrix,n,n,AssoMatrix);</span><br><span class="line">            ChangeC(AssoMatrix,n,n,Column,i+<span class="number">1</span>);</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;D%d = %d\t   &quot;</span>,i+<span class="number">1</span>,CalcuHiDet(AssoMatrix,n));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">CalcuSystem</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n = VarNum();</span><br><span class="line">    <span class="keyword">if</span>(n)&#123;</span><br><span class="line">        <span class="keyword">int</span> * Matrix = (<span class="keyword">int</span> *)<span class="built_in">malloc</span>(n*n*<span class="keyword">sizeof</span>(<span class="keyword">int</span>));</span><br><span class="line">        <span class="keyword">int</span> * Column = (<span class="keyword">int</span> *)<span class="built_in">malloc</span>(n*<span class="keyword">sizeof</span>(<span class="keyword">int</span>));</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;The coefficient matrix of the system: \n&quot;</span>);</span><br><span class="line">        DefM(Matrix,n,n);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;The column matrix of the system: \n&quot;</span>);</span><br><span class="line">        DefM(Column,n,<span class="number">1</span>);</span><br><span class="line">        Calculation(Matrix,Column,n);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;\nEnter to continue.\n&quot;</span>);</span><br><span class="line">        getchar();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">    </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">talk</span><span class="params">(<span class="keyword">int</span> n)</span></span>&#123;</span><br><span class="line">    <span class="keyword">switch</span> (n%<span class="number">11</span>)</span><br><span class="line">    &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;I would like to,but now we should study.\nEmm...We can do it at home.(whisper)\n&quot;</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;DOCTOR DAISUKI !\n&quot;</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;(Ten hours later)Emm...Doctor,you are so strong.(Biting your ear).\n&quot;</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Do you forget to work?Oh?Ah...I will be waiting for you!\n&quot;</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Do you forget your work?Oh?\n&quot;</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">5</span>:</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Just Joking.\n&quot;</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">6</span>:</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Magic,magic.Make doctor happier!\n&quot;</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">7</span>:</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Recommend you to listen to a song called the loop of love,doctor.\n&quot;</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">8</span>:</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;You can got everything you want in your dreams,doctor.\n&quot;</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">9</span>:</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;I was so shy to say the words.Embarrassment kills me....\n&quot;</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">10</span>:</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Doctor,my room it\&#x27;s upstairs.Shall we go now?(looking up to you)\n&quot;</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;I...I haven\&#x27;t got ready./(///v///)/\n&quot;</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;\nEnter to contine\n\n&quot;</span>);</span><br><span class="line">    getchar();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    <span class="keyword">while</span>(n = Start())&#123;</span><br><span class="line">        <span class="keyword">if</span>(n == <span class="number">1</span>) CalcuSystem();</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(n == <span class="number">2</span>) &#123;</span><br><span class="line">            srand(time(<span class="literal">NULL</span>));</span><br><span class="line">            talk(rand());</span><br><span class="line">        &#125;</span><br><span class="line">        getchar();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Have a nice day,doctor!\nBye!&quot;</span>);</span><br><span class="line">    getchar();</span><br><span class="line">    getchar();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="C-EPUB文件制作框架"><a href="#C-EPUB文件制作框架" class="headerlink" title="C-EPUB文件制作框架"></a>C-EPUB文件制作框架</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;time.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">make_mimetype</span><span class="params">()</span></span>&#123;</span><br><span class="line">    FILE * fp;</span><br><span class="line">    fp = fopen(<span class="string">&quot;BookName/mimetype&quot;</span>,<span class="string">&quot;w&quot;</span>);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;application/epub+zip&quot;</span>,fp);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">make_folder</span><span class="params">()</span></span>&#123;</span><br><span class="line">    _mkdir(<span class="string">&quot;BookName&quot;</span>);</span><br><span class="line">    _mkdir(<span class="string">&quot;BookName/META-INF&quot;</span>);</span><br><span class="line">    _mkdir(<span class="string">&quot;BookName/OEBPS&quot;</span>);</span><br><span class="line">    _mkdir(<span class="string">&quot;BookName/OEBPS/Fonts&quot;</span>);</span><br><span class="line">    _mkdir(<span class="string">&quot;BookName/OEBPS/Images&quot;</span>);</span><br><span class="line">    _mkdir(<span class="string">&quot;BookName/OEBPS/Styles&quot;</span>);</span><br><span class="line">    _mkdir(<span class="string">&quot;BookName/OEBPS/Text&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">make_content</span><span class="params">(<span class="keyword">int</span> chapnum,<span class="keyword">int</span> picnum,<span class="keyword">int</span> illnum)</span></span>&#123;</span><br><span class="line">    <span class="keyword">time_t</span> t;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">tm</span> *<span class="title">p</span>;</span></span><br><span class="line">    time(&amp;t);</span><br><span class="line">    p = gmtime(&amp;t);</span><br><span class="line">    FILE * fp;</span><br><span class="line">    fp = fopen(<span class="string">&quot;BookName/OEBPS/content.opf&quot;</span>,<span class="string">&quot;w&quot;</span>);</span><br><span class="line">    <span class="built_in">fprintf</span>(fp,<span class="string">&quot;&lt;?xml version=\&quot;1.0\&quot; encoding=\&quot;utf-8\&quot;?&gt;\n&quot;</span>);</span><br><span class="line">    <span class="built_in">fprintf</span>(fp,<span class="string">&quot;&lt;package version=\&quot;2.0\&quot; unique-identifier=\&quot;BookId\&quot; xmlns=\&quot;http://www.idpf.org/2007/opf\&quot;&gt;\n&quot;</span>);</span><br><span class="line">    <span class="built_in">fprintf</span>(fp,<span class="string">&quot;\t&lt;metadata xmlns:dc=\&quot;http://purl.org/dc/elements/1.1/\&quot; xmlns:opf=\&quot;http://www.idpf.org/2007/opf\&quot;&gt;\n&quot;</span>);</span><br><span class="line">    <span class="built_in">fprintf</span>(fp,<span class="string">&quot;\t\t&lt;dc:identifier opf:scheme=\&quot;UUID\&quot; id=\&quot;BookId\&quot;&gt;urn:uuid:&lt;!--uuid--&gt;&lt;/dc:identifier&gt;\n&quot;</span>);</span><br><span class="line">    <span class="built_in">fprintf</span>(fp,<span class="string">&quot;\t\t&lt;dc:title&gt;&lt;!--书名--&gt;&lt;/dc:title&gt;\n&quot;</span>);</span><br><span class="line">    <span class="built_in">fprintf</span>(fp,<span class="string">&quot;\t\t&lt;dc:creator opf:role=\&quot;aut\&quot; opf:file-as=\&quot;BlueRiver\&quot;&gt;&lt;!--作者名--&gt;&lt;/dc:creator&gt;\n&quot;</span>);</span><br><span class="line">    <span class="built_in">fprintf</span>(fp,<span class="string">&quot;\t\t&lt;dc:language&gt;zh&lt;/dc:language&gt;\n&quot;</span>);</span><br><span class="line">    <span class="built_in">fprintf</span>(fp,<span class="string">&quot;\t\t&lt;dc:rights&gt;BlueRiver&lt;/dc:rights&gt;\n&quot;</span>);</span><br><span class="line">    <span class="built_in">fprintf</span>(fp,<span class="string">&quot;\t\t&lt;dc:subject&gt;轻小说&lt;/dc:subject&gt;\n&quot;</span>);</span><br><span class="line">    <span class="built_in">fprintf</span>(fp,<span class="string">&quot;\t\t&lt;dc:description&gt;\n\t\t\t&lt;!--简介--&gt;\n\t\t&lt;/dc:description&gt;\n&quot;</span>);</span><br><span class="line">    <span class="built_in">fprintf</span>(fp,<span class="string">&quot;\t\t&lt;dc:source&gt;BlueRiver&lt;/dc:source&gt;\n&quot;</span>);</span><br><span class="line">    <span class="built_in">fprintf</span>(fp,<span class="string">&quot;\t\t&lt;dc:publisher&gt;BlueRiver&lt;/dc:publisher&gt;\n&quot;</span>);</span><br><span class="line">    <span class="built_in">fprintf</span>(fp,<span class="string">&quot;\t\t&lt;dc:date opf:event=\&quot;publication\&quot;&gt;%d-%d-%d&lt;/dc:date&gt;\n&quot;</span>,p-&gt;tm_year+<span class="number">1900</span>,p-&gt;tm_mon+<span class="number">1</span>,p-&gt;tm_mday);</span><br><span class="line">    <span class="built_in">fprintf</span>(fp,<span class="string">&quot;\t\t&lt;dc:date opf:event=\&quot;modification\&quot;&gt;%d-%d-%d&lt;/dc:date&gt;\n&quot;</span>,p-&gt;tm_year+<span class="number">1900</span>,p-&gt;tm_mon+<span class="number">1</span>,p-&gt;tm_mday);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\t\t&lt;meta name=\&quot;Sigil version\&quot; content=\&quot;0.9.13\&quot; /&gt;\n&quot;</span>,fp);    </span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\t\t&lt;meta name=\&quot;cover\&quot; content=\&quot;cover.jpg\&quot;/&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\t&lt;/metadata&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\t&lt;manifest&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\t\t&lt;item id=\&quot;ncx\&quot; href=\&quot;toc.ncx\&quot; media-type=\&quot;application/x-dtbncx+xml\&quot;/&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\t\t&lt;item id=\&quot;postscript.xhtml\&quot; href=\&quot;postscript.xhtml\&quot; media-type=\&quot;application/xhtml+xml\&quot;/&gt;\n&quot;</span>,fp);<span class="comment">//后记</span></span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\t\t&lt;item id=\&quot;message.xhtml\&quot; href=\&quot;Text/message.xhtml\&quot; media-type=\&quot;application/xhtml+xml\&quot;/&gt;\n&quot;</span>,fp);<span class="comment">//制作信息页</span></span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\t\t&lt;item id=\&quot;introduction.xhtml\&quot; href=\&quot;Text/introduction.xhtml\&quot; media-type=\&quot;application/xhtml+xml\&quot;/&gt;\n&quot;</span>,fp);<span class="comment">//简介</span></span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\t\t&lt;item id=\&quot;contents.xhtml\&quot; href=\&quot;Text/contents.xhtml\&quot; media-type=\&quot;application/xhtml+xml\&quot;/&gt;\n&quot;</span>,fp);<span class="comment">//目录</span></span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\t\t&lt;item id=\&quot;cover.jpg\&quot; href=\&quot;Images/cover.jpg\&quot; media-type=\&quot;image/jpeg\&quot;/&gt;\n&quot;</span>,fp);<span class="comment">//封面</span></span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\t\t&lt;item id=\&quot;cover.xhtml\&quot; href=\&quot;Text/cover.xhtml\&quot; media-type=\&quot;application/xhtml+xml\&quot;/&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\t\t&lt;item id=\&quot;title.xhtml\&quot; href=\&quot;Text/title.xhtml\&quot; media-type=\&quot;application/xhtml+xml\&quot;/&gt;\n&quot;</span>,fp);<span class="comment">//书名页</span></span><br><span class="line">    <span class="comment">//章节</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> k = <span class="number">0</span>;k &lt; chapnum;k++)&#123;</span><br><span class="line">        <span class="built_in">fprintf</span>(fp,<span class="string">&quot;\t\t&lt;item id=\&quot;chapter%03d.xhtml\&quot; href=\&quot;Text/chapter%03d.xhtml\&quot; media-type=\&quot;application/xhtml+xml\&quot;/&gt;\n&quot;</span>,k+<span class="number">1</span>,k+<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//插图</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> k = <span class="number">0</span>;k &lt; picnum;k++)&#123;</span><br><span class="line">        <span class="built_in">fprintf</span>(fp,<span class="string">&quot;\t\t&lt;item id=\&quot;x%03d.jpg\&quot; href=\&quot;Images/%03d.jpg\&quot; media-type=\&quot;image/jpeg\&quot;/&gt;\n&quot;</span>,k+<span class="number">1</span>,k+<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//彩图页</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> k = <span class="number">0</span>;k &lt; illnum;k++)&#123;</span><br><span class="line">        <span class="built_in">fprintf</span>(fp,<span class="string">&quot;\t\t&lt;item id=\&quot;illustration%d.xhtml\&quot; href=\&quot;Text/illustration%d.xhtml\&quot; media-type=\&quot;image/jpeg\&quot;/&gt;\n&quot;</span>,k+<span class="number">1</span>,k+<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> k = <span class="number">0</span>;k &lt; illnum;k++)&#123;</span><br><span class="line">        <span class="built_in">fprintf</span>(fp,<span class="string">&quot;\t\t&lt;item id=\&quot;xc%03d.jpg\&quot; href=\&quot;Images/c%03d.jpg\&quot; media-type=\&quot;image/jpeg\&quot;/&gt;\n&quot;</span>,k+<span class="number">1</span>,k+<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//此处默认字体文件和样式表文件名称</span></span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\t\t&lt;item id=\&quot;style.css\&quot; href=\&quot;Styles/style.css\&quot; media-type=\&quot;text/css\&quot;/&gt;\n&quot;</span>,fp);<span class="comment">//样式表默认名称为style.css</span></span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\t\t&lt;item id=\&quot; &lt;!--此处填写文件名称--&gt; \&quot; href=\&quot; &lt;!--此处填写文件相对路径--&gt; \&quot; media-type=\&quot; &lt;!--此处填写文件格式--&gt; \&quot;/&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    文件格式例如：</span></span><br><span class="line"><span class="comment">    application/xhtml+xml</span></span><br><span class="line"><span class="comment">    application/x-font-ttf</span></span><br><span class="line"><span class="comment">    image/png</span></span><br><span class="line"><span class="comment">    image/jpeg</span></span><br><span class="line"><span class="comment">    text/css</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\t&lt;/manifest&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\t&lt;spine toc=\&quot;ncx\&quot;&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\t\t&lt;itemref idref=\&quot;cover.xhtml\&quot; properties=\&quot;duokan-page-fullscreen\&quot;/&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\t\t&lt;itemref idref=\&quot;title.xhtml\&quot;/&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\t\t&lt;itemref idref=\&quot;message.xhtml\&quot;/&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\t\t&lt;itemref idref=\&quot;introduction.xhtml\&quot;/&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="comment">//彩图页</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> k = <span class="number">0</span>;k &lt; illnum;k++)&#123;</span><br><span class="line">        <span class="built_in">fprintf</span>(fp,<span class="string">&quot;\t\t&lt;itemref idref=\&quot;illustration%03d.xhtml\&quot; properties=\&quot;duokan-page-fitwindow\&quot;/&gt;\n&quot;</span>,k+<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\t\t&lt;itemref idref=\&quot;contents.xhtml\&quot;/&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="comment">//章节</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> k = <span class="number">0</span>;k &lt; chapnum;k++)&#123;</span><br><span class="line">        <span class="built_in">fprintf</span>(fp,<span class="string">&quot;\t\t&lt;itemref idref=\&quot;chapter%03d.xhtml\&quot;/&gt;\n&quot;</span>,k+<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\t\t&lt;itemref idref=\&quot;postscript.xhtml\&quot;/&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\t&lt;/spine&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;&lt;/package&gt;&quot;</span>,fp);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">make_container</span><span class="params">()</span></span>&#123;</span><br><span class="line">    FILE * fp;</span><br><span class="line">    fp = fopen(<span class="string">&quot;BookName/META-INF/container.xml&quot;</span>,<span class="string">&quot;w&quot;</span>);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;&lt;?xml version=\&quot;1.0\&quot; encoding=\&quot;UTF-8\&quot;?&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;&lt;container version=\&quot;1.0\&quot; xmlns=\&quot;urn:oasis:names:tc:opendocument:xmlns:container\&quot;&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\t&lt;rootfiles&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\t\t&lt;rootfile full-path=\&quot;OEBPS/content.opf\&quot; media-type=\&quot;application/oebps-package+xml\&quot;/&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\t&lt;/rootfiles&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;&lt;/container&gt;&quot;</span>,fp);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">make_toc</span><span class="params">(<span class="keyword">int</span> chapnum,<span class="keyword">int</span> picnum,<span class="keyword">int</span> illnum)</span></span>&#123;</span><br><span class="line">    FILE * fp;</span><br><span class="line">    fp = fopen(<span class="string">&quot;BookName/OEBPS/toc.ncx&quot;</span>,<span class="string">&quot;w&quot;</span>);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;&lt;?xml version=\&quot;1.0\&quot; encoding=\&quot;utf-8\&quot; ?&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;&lt;!DOCTYPE ncx PUBLIC \&quot;-//NISO//DTD ncx 2005-1//EN\&quot; \&quot;http://www.daisy.org/z3986/2005/ncx-2005-1.dtd\&quot;&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;&lt;ncx version=\&quot;2005-1\&quot; xmlns=\&quot;http://www.daisy.org/z3986/2005/ncx/\&quot;&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\t&lt;head&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\t\t&lt;meta content=\&quot;urn:uuid:&lt;!--uuid--&gt;\&quot; name=\&quot;dtb:uid\&quot;/&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\t\t&lt;meta content=\&quot;1\&quot; name=\&quot;dtb:depth\&quot;/&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\t\t&lt;meta content=\&quot;0\&quot; name=\&quot;dtb:totalPageCount\&quot;/&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\t\t&lt;meta content=\&quot;0\&quot; name=\&quot;dtb:maxPageNumber\&quot;/&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\t&lt;/head&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\t&lt;docTitle&gt;\n\t\t&lt;text&gt;&lt;!--书名--&gt;&lt;/text&gt;\n\t&lt;docTitle&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\t&lt;navMap&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">    i += <span class="number">1</span>;</span><br><span class="line">    <span class="built_in">fprintf</span>(fp,<span class="string">&quot;\t\t&lt;navPoint id=\&quot;navPoint-%d\&quot; playOrder=\&quot;%d\&quot;&gt;\n\t\t\t&lt;navLabel&gt;\n\t\t\t\t&lt;text&gt;封面&lt;/text&gt;\n\t\t\t&lt;/navLabel&gt;\n\t\t\t&lt;content src=\&quot;Text/cover.xhtml\&quot;/&gt;\n\t\t&lt;/navPoint&gt;\n&quot;</span>,i,i);</span><br><span class="line">    i += <span class="number">1</span>;</span><br><span class="line">    <span class="built_in">fprintf</span>(fp,<span class="string">&quot;\t\t&lt;navPoint id=\&quot;navPoint-%d\&quot; playOrder=\&quot;%d\&quot;&gt;\n\t\t\t&lt;navLabel&gt;\n\t\t\t\t&lt;text&gt;制作信息&lt;/text&gt;\n\t\t\t&lt;/navLabel&gt;\n\t\t\t&lt;content src=\&quot;Text/message.xhtml\&quot;/&gt;\n\t\t&lt;/navPoint&gt;\n&quot;</span>,i,i);</span><br><span class="line">    i += <span class="number">1</span>;</span><br><span class="line">    <span class="built_in">fprintf</span>(fp,<span class="string">&quot;\t\t&lt;navPoint id=\&quot;navPoint-%d\&quot; playOrder=\&quot;%d\&quot;&gt;\n\t\t\t&lt;navLabel&gt;\n\t\t\t\t&lt;text&gt;简介&lt;/text&gt;\n\t\t\t&lt;/navLabel&gt;\n\t\t\t&lt;content src=\&quot;Text/introduction.xhtml\&quot;/&gt;\n\t\t&lt;/navPoint&gt;\n&quot;</span>,i,i);</span><br><span class="line">    i += <span class="number">1</span>;</span><br><span class="line">    <span class="built_in">fprintf</span>(fp,<span class="string">&quot;\t\t&lt;navPoint id=\&quot;navPoint-%d\&quot; playOrder=\&quot;%d\&quot;&gt;\n\t\t\t&lt;navLabel&gt;\n\t\t\t\t&lt;text&gt;彩页&lt;/text&gt;\n\t\t\t&lt;/navLabel&gt;\n\t\t\t&lt;content src=\&quot;Text/illustration001.xhtml\&quot;/&gt;\n\t\t&lt;/navPoint&gt;\n&quot;</span>,i,i);</span><br><span class="line">    i += <span class="number">1</span>;</span><br><span class="line">    <span class="built_in">fprintf</span>(fp,<span class="string">&quot;\t\t&lt;navPoint id=\&quot;navPoint-%d\&quot; playOrder=\&quot;%d\&quot;&gt;\n\t\t\t&lt;navLabel&gt;\n\t\t\t\t&lt;text&gt;目录&lt;/text&gt;\n\t\t\t&lt;/navLabel&gt;\n\t\t\t&lt;content src=\&quot;Text/contents.xhtml\&quot;/&gt;\n\t\t&lt;/navPoint&gt;\n&quot;</span>,i,i);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> k = <span class="number">0</span>;k &lt; chapnum;k++)&#123;</span><br><span class="line">        i += <span class="number">1</span>;</span><br><span class="line">        <span class="built_in">fprintf</span>(fp,<span class="string">&quot;\t\t&lt;navPoint id=\&quot;navPoint-%d\&quot; playOrder=\&quot;%d\&quot;&gt;\n\t\t\t&lt;navLabel&gt;\n\t\t\t\t&lt;text&gt;&lt;!--章节名称--&gt;&lt;/text&gt;\n\t\t\t&lt;/navLabel&gt;\n\t\t\t&lt;content src=\&quot;Text/chapter%03d.xhtml\&quot;/&gt;\n\t\t&lt;/navPoint&gt;\n&quot;</span>,i,i,k+<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    i += <span class="number">1</span>;</span><br><span class="line">    <span class="built_in">fprintf</span>(fp,<span class="string">&quot;\t\t&lt;navPoint id=\&quot;navPoint-%d\&quot; playOrder=\&quot;%d\&quot;&gt;\n\t\t\t&lt;navLabel&gt;\n\t\t\t\t&lt;text&gt;后记&lt;/text&gt;\n\t\t\t&lt;/navLabel&gt;\n\t\t\t&lt;content src=\&quot;Text/postscript.xhtml\&quot;/&gt;\n\t\t&lt;/navPoint&gt;\n&quot;</span>,i,i);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\t&lt;/navMap&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;&lt;/ncx&gt;\n&quot;</span>,fp);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">make_title</span><span class="params">()</span></span>&#123;</span><br><span class="line">    FILE * fp;</span><br><span class="line">    fp = fopen(<span class="string">&quot;BookName/OEBPS/Text/title.xhtml&quot;</span>,<span class="string">&quot;w&quot;</span>);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;&lt;?xml version=\&quot;1.0\&quot; encoding=\&quot;utf-8\&quot;?&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;&lt;!DOCTYPE html PUBLIC \&quot;-//W3C//DTD XHTML 1.1//EN\&quot; \&quot;http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd\&quot;&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;&lt;html xmlns=\&quot;http://www.w3.org/1999/xhtml\&quot; xml:lang=\&quot;zh-CN\&quot;&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\t&lt;head&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\t\t&lt;title&gt;标题&lt;/title&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\t\t&lt;link href=\&quot;../Styles/style.css\&quot; type=\&quot;text/css\&quot; rel=\&quot;stylesheet\&quot;/&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\t&lt;/head&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\t&lt;body&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\t\t&lt;h1&gt;&lt;!--书名--&gt;&lt;h1&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\t&lt;/body&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;&lt;/html&gt;\n&quot;</span>,fp);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">make_message</span><span class="params">()</span></span>&#123;</span><br><span class="line">    FILE * fp;</span><br><span class="line">    fp = fopen(<span class="string">&quot;BookName/OEBPS/Text/message.xhtml&quot;</span>,<span class="string">&quot;w&quot;</span>);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;&lt;?xml version=\&quot;1.0\&quot; encoding=\&quot;utf-8\&quot;?&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;&lt;!DOCTYPE html PUBLIC \&quot;-//W3C//DTD XHTML 1.1//EN\&quot; \&quot;http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd\&quot;&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;&lt;html xmlns=\&quot;http://www.w3.org/1999/xhtml\&quot; xml:lang=\&quot;zh-CN\&quot;&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\t&lt;head&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\t\t&lt;title&gt;制作信息&lt;/title&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\t\t&lt;link href=\&quot;../Styles/style.css\&quot; type=\&quot;text/css\&quot; rel=\&quot;stylesheet\&quot;/&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\t&lt;/head&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\t&lt;body&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\t\t&lt;h1 class=\&quot;makertitle\&quot;&gt;制作信息&lt;/h1&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\t\t&lt;p class=\&quot;cutline\&quot;&gt;≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡&lt;/p&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\t\t&lt;h1&gt;&lt;!--书名--&gt;&lt;h1&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\t\t&lt;p class=\&quot;makerifm\&quot;&gt;作者：&lt;/p&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\t\t&lt;p class=\&quot;makerifm\&quot;&gt;插画：&lt;/p&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\t\t&lt;p class=\&quot;makerifm\&quot;&gt;译者：&lt;/p&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\t\t&lt;p class=\&quot;makerifm\&quot;&gt;图源：&lt;/p&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\t\t&lt;p class=\&quot;makerifm\&quot;&gt;录入：&lt;/p&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\t\t&lt;p class=\&quot;makerifm\&quot;&gt;仅供个人学习交流使用，禁作商业用途&lt;/p&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\t\t&lt;p class=\&quot;makerifm\&quot;&gt;下载后请在24小时内删除&lt;/p&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\t\t&lt;p class=\&quot;makerifm\&quot;&gt;请尊重翻译、扫图、录入、校对的辛勤劳动，转载请保留信息&lt;/p&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\t\t&lt;p class=\&quot;makerifm\&quot;&gt;≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡&lt;/p&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\t&lt;/body&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;&lt;/html&gt;\n&quot;</span>,fp);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">make_cover</span><span class="params">()</span></span>&#123;</span><br><span class="line">    FILE * fp;</span><br><span class="line">    fp = fopen(<span class="string">&quot;BookName/OEBPS/Text/cover.xhtml&quot;</span>,<span class="string">&quot;w&quot;</span>);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;&lt;?xml version=\&quot;1.0\&quot; encoding=\&quot;utf-8\&quot;?&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;&lt;!DOCTYPE html PUBLIC \&quot;-//W3C//DTD XHTML 1.1//EN\&quot; \&quot;http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd\&quot;&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;&lt;html xmlns=\&quot;http://www.w3.org/1999/xhtml\&quot; xml:lang=\&quot;zh-CN\&quot;&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\t&lt;head&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\t\t&lt;title&gt;标题&lt;/title&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\t\t&lt;link href=\&quot;../Styles/style.css\&quot; type=\&quot;text/css\&quot; rel=\&quot;stylesheet\&quot;/&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\t&lt;/head&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\t&lt;body&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\t\t&lt;div class=\&quot;cover duokan-image-single\&quot;&gt;&lt;img alt=\&quot;cover\&quot; src=\&quot;../Images/cover.jpg\&quot;/&gt;&lt;/div&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\t&lt;/body&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;&lt;/html&gt;\n&quot;</span>,fp);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">make_introduction</span><span class="params">()</span></span>&#123;</span><br><span class="line">    FILE * fp;</span><br><span class="line">    fp = fopen(<span class="string">&quot;BookName/OEBPS/Text/introduction.xhtml&quot;</span>,<span class="string">&quot;w&quot;</span>);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;&lt;?xml version=\&quot;1.0\&quot; encoding=\&quot;utf-8\&quot;?&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;&lt;!DOCTYPE html PUBLIC \&quot;-//W3C//DTD XHTML 1.1//EN\&quot; \&quot;http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd\&quot;&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;&lt;html xmlns=\&quot;http://www.w3.org/1999/xhtml\&quot; xml:lang=\&quot;zh-CN\&quot;&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\t&lt;head&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\t\t&lt;title&gt;简介&lt;/title&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\t\t&lt;link href=\&quot;../Styles/style.css\&quot; type=\&quot;text/css\&quot; rel=\&quot;stylesheet\&quot;/&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\t&lt;/head&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;&lt;body&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;&lt;div&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;&lt;h1 class=\&quot;color1 fzzys\&quot;&gt;简介&lt;/h1&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;&lt;/div&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;&lt;/body&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;&lt;/html&gt;\n&quot;</span>,fp);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">char</span> illpath[<span class="number">50</span>] = <span class="string">&quot;BookName/OEBPS/Text/illustration001.xhtml&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">make_illustration</span><span class="params">(<span class="keyword">int</span> illnum)</span></span>&#123;</span><br><span class="line">    FILE * fp;</span><br><span class="line">    <span class="keyword">char</span> pa[<span class="number">50</span>];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> n = <span class="number">0</span>;n &lt; illnum;n++)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">32</span>;i++)&#123;</span><br><span class="line">            pa[i] = illpath[i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">35</span>; i &lt;= <span class="number">50</span>;i++)&#123;</span><br><span class="line">            pa[i] = illpath[i];</span><br><span class="line">        &#125;</span><br><span class="line">        pa[<span class="number">32</span>] = illpath[<span class="number">32</span>] + n/<span class="number">100</span>;</span><br><span class="line">        pa[<span class="number">33</span>] = illpath[<span class="number">33</span>] + n/<span class="number">10</span> - (n/<span class="number">100</span>)*<span class="number">10</span>;</span><br><span class="line">        pa[<span class="number">34</span>] = illpath[<span class="number">34</span>] + n%<span class="number">10</span>;</span><br><span class="line">        fp = fopen(pa,<span class="string">&quot;w&quot;</span>);</span><br><span class="line">        <span class="built_in">fputs</span>(<span class="string">&quot;&lt;?xml version=\&quot;1.0\&quot; encoding=\&quot;utf-8\&quot;?&gt;\n&quot;</span>,fp);</span><br><span class="line">        <span class="built_in">fputs</span>(<span class="string">&quot;&lt;!DOCTYPE html PUBLIC \&quot;-//W3C//DTD XHTML 1.1//EN\&quot; \&quot;http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd\&quot;&gt;\n&quot;</span>,fp);</span><br><span class="line">        <span class="built_in">fputs</span>(<span class="string">&quot;&lt;html xmlns=\&quot;http://www.w3.org/1999/xhtml\&quot; xml:lang=\&quot;zh-CN\&quot;&gt;\n&quot;</span>,fp);</span><br><span class="line">        <span class="built_in">fputs</span>(<span class="string">&quot;\t&lt;head&gt;\n&quot;</span>,fp);</span><br><span class="line">        <span class="built_in">fprintf</span>(fp,<span class="string">&quot;\t\t&lt;title&gt;彩页%d&lt;/title&gt;\n&quot;</span>,n+<span class="number">1</span>);</span><br><span class="line">        <span class="built_in">fputs</span>(<span class="string">&quot;\t\t&lt;link href=\&quot;../Styles/style.css\&quot; type=\&quot;text/css\&quot; rel=\&quot;stylesheet\&quot;/&gt;\n&quot;</span>,fp);</span><br><span class="line">        <span class="built_in">fputs</span>(<span class="string">&quot;\t&lt;/head&gt;\n&quot;</span>,fp);</span><br><span class="line">        <span class="built_in">fputs</span>(<span class="string">&quot;\t&lt;body&gt;\n&quot;</span>,fp);</span><br><span class="line">        <span class="built_in">fputs</span>(<span class="string">&quot;\t\t&lt;div&gt;\n&quot;</span>,fp);</span><br><span class="line">        <span class="built_in">fprintf</span>(fp,<span class="string">&quot;\t\t\t&lt;div class=\&quot;center duokan-image-single\&quot;&gt;&lt;img alt=\&quot;c%03d\&quot; src=\&quot;../Images/c%03d.jpg\&quot;/&gt;&lt;/div&gt;\n&quot;</span>,n+<span class="number">1</span>);</span><br><span class="line">        <span class="built_in">fputs</span>(<span class="string">&quot;\t\t&lt;/div&gt;\n&quot;</span>,fp);</span><br><span class="line">        <span class="built_in">fputs</span>(<span class="string">&quot;\t&lt;/body&gt;\n&quot;</span>,fp);</span><br><span class="line">        <span class="built_in">fputs</span>(<span class="string">&quot;&lt;/html&gt;\n&quot;</span>,fp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">make_postscript</span><span class="params">()</span></span>&#123;</span><br><span class="line">    FILE * fp;</span><br><span class="line">    fp = fopen(<span class="string">&quot;BookName/OEBPS/Text/postscript.xhtml&quot;</span>,<span class="string">&quot;w&quot;</span>);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;&lt;?xml version=\&quot;1.0\&quot; encoding=\&quot;utf-8\&quot;?&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;&lt;!DOCTYPE html PUBLIC \&quot;-//W3C//DTD XHTML 1.1//EN\&quot; \&quot;http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd\&quot;&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;&lt;html xmlns=\&quot;http://www.w3.org/1999/xhtml\&quot; xml:lang=\&quot;zh-CN\&quot;&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\t&lt;head&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\t\t&lt;title&gt;后记&lt;/title&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\t\t&lt;link href=\&quot;../Styles/style.css\&quot; type=\&quot;text/css\&quot; rel=\&quot;stylesheet\&quot;/&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\t&lt;/head&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;&lt;body&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;&lt;h1 class=\&quot;fzzys\&quot;&gt;后记&lt;/h1&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;&lt;/body&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;&lt;/html&gt;\n&quot;</span>,fp);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">make_contents</span><span class="params">(<span class="keyword">int</span> chapnum)</span></span>&#123;</span><br><span class="line">    FILE * fp;</span><br><span class="line">    fp = fopen(<span class="string">&quot;BookName/OEBPS/Text/contents.xhtml&quot;</span>,<span class="string">&quot;w&quot;</span>);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;&lt;?xml version=\&quot;1.0\&quot; encoding=\&quot;utf-8\&quot;?&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;&lt;!DOCTYPE html PUBLIC \&quot;-//W3C//DTD XHTML 1.1//EN\&quot; \&quot;http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd\&quot;&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;&lt;html xmlns=\&quot;http://www.w3.org/1999/xhtml\&quot; xml:lang=\&quot;zh-CN\&quot;&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\t&lt;head&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\t\t&lt;title&gt;Contents&lt;/title&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\t\t&lt;link href=\&quot;../Styles/style.css\&quot; type=\&quot;text/css\&quot; rel=\&quot;stylesheet\&quot;/&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\t&lt;/head&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\t&lt;body&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\t\t&lt;div class=\&quot;contents\&quot;&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\t\t\t&lt;div class=\&quot;box\&quot;&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\t\t\t\t&lt;h2&gt;CONTENTS&lt;/h2&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\t\t\t\t&lt;table border=\&quot;0\&quot; cellspacing=\&quot;0\&quot; cellpadding=\&quot;0\&quot;&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\t\t\t\t\t&lt;tbody&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> k = <span class="number">0</span>;k &lt; chapnum;k++)&#123;</span><br><span class="line">        <span class="built_in">fputs</span>(<span class="string">&quot;\t\t\t\t\t\t&lt;tr&gt;\n&quot;</span>,fp);</span><br><span class="line">        <span class="built_in">fprintf</span>(fp,<span class="string">&quot;\t\t\t\t\t\t\t&lt;td&gt;&lt;a class=\&quot;nodeco colorg\&quot; href=\&quot;../Text/chapter%03d.xhtml\&quot;&gt;&lt;!--样式--&gt;&lt;/a&gt;&lt;/td&gt;\n&quot;</span>,k+<span class="number">1</span>);</span><br><span class="line">        <span class="built_in">fprintf</span>(fp,<span class="string">&quot;\t\t\t\t\t\t\t&lt;td&gt;&lt;a class=\&quot;nodeco colorg\&quot; href=\&quot;../Text/chapter%03d.xhtml\&quot;&gt;&lt;!--章节标题--&gt;&lt;/a&gt;&lt;/td&gt;\n&quot;</span>,k+<span class="number">1</span>);</span><br><span class="line">        <span class="built_in">fputs</span>(<span class="string">&quot;\t\t\t\t\t\t&lt;/tr&gt;\n&quot;</span>,fp);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\t\t\t\t\t\t&lt;tr&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\t\t\t\t\t\t\t&lt;td&gt;&lt;/td&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\t\t\t\t\t\t\t&lt;td&gt;&lt;a class=\&quot;nodeco colorg\&quot; href=\&quot;../Text/postscript.xhtml\&quot;&gt;后记&lt;/a&gt;&lt;/td&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\t\t\t\t\t\t&lt;/tr&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\t\t\t\t\t&lt;/tbody&gt;\n\t\t\t\t&lt;/table&gt;\n\t\t\t&lt;/div&gt;\n\t\t&lt;/div&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\t&lt;/body&gt;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;&lt;/html&gt;\n&quot;</span>,fp);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">make_content_toc_text</span><span class="params">(<span class="keyword">int</span> chapnum,<span class="keyword">int</span> picnum,<span class="keyword">int</span> illnum)</span></span>&#123;</span><br><span class="line">    make_content(chapnum,picnum,illnum);</span><br><span class="line">    make_toc(chapnum,picnum,illnum);</span><br><span class="line">    make_title();</span><br><span class="line">    make_message();</span><br><span class="line">    make_cover();</span><br><span class="line">    make_introduction();</span><br><span class="line">    make_illustration(illnum);</span><br><span class="line">    make_postscript();</span><br><span class="line">    make_contents(chapnum);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">make_basicss</span><span class="params">()</span></span>&#123;</span><br><span class="line">    FILE * fp;</span><br><span class="line">    fp = fopen(<span class="string">&quot;BookName/OEBPS/Styles/style.css&quot;</span>,<span class="string">&quot;w&quot;</span>);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;/*基础样式*/\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;body&#123;padding: 0%;margin-top: 0%;margin-bottom: 0%;margin-left: 1%;margin-right: 1%;line-height:1.2;text-align: justify;&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;p &#123;text-indent:2em;display:block;line-height:1.3;margin-top:0.6em;margin-bottom:0.6em;&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;div &#123;margin:0px;padding:0px;line-height:1.2;text-align: justify;&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;li&#123; clear:both; display:block&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;td&#123;padding:3px 0px&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;/*封面样式*/\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.cover &#123;margin: 0px;padding: 0px;text-indent: 0;text-align: center !important;&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;/*制作信息页样式*/\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.makertitle&#123;font-size: 1.3em;text-indent: 0em;font-weight: bold;margin-top: 0.5em;margin-bottom: 0.5em;&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.cutline&#123;text-indent: 0em;line-height: 0;margin-top: 0.3em;margin-bottom: 0.3em;&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.makerifm&#123;text-indent: 0em;line-height: 1.2;margin-top: 0.2em;margin-bottom: 0.2em;&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;/*Logo页样式*/\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.logoarea&#123;text-indent: 0em;text-align:center !important;margin-top: 20%;margin-bottom: 0%;&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.logoimage&#123;width:100%;&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;/*目录页样式*/\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;/*“目录”标题颜色*/\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.colorco&#123;color:#000000&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;/*目录页超链接样式*/\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.nodeco&#123;text-decoration:none&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;/*目录页超链接颜色*/\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.colorg&#123;color:#000000&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;/*正文样式*/\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;/*正文章节标题样式*/\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;h1 &#123;font-size: 1.3em;line-height: 1.2;margin-top: 1em;margin-bottom: 1.2em;font-weight: bold;text-align: center !important;&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;/*注释代码样式*/\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.po&#123;font-size:0.9em;text-indent:-0.8em;padding: 0em 0.1em 0.1em 1em;color:#960014&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;/*正文插图样式*/\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.kuan&#123;duokan-bleed:leftright&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.zhai&#123;duokan-bleed:lefttopright&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;/*上标样式*/\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;ruby&#123;ruby-align:center&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;rt&#123;font-size:0.7em;&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;/*下标黑点着重号*/\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.zzh &#123;text-emphasis-style:dot;text-emphasis-position:under;-webkit-text-emphasis-style:dot;-webkit-text-emphasis-position:under;-webkit-text-emphasis-style:dot;-epub-text-emphasis-style:dot;&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;/*字体样式控制*/\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;/*字体加粗*/\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.bold&#123;font-weight:bold&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;/*字体高度*/\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.font03&#123;font-size: 0.3em&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.font04&#123;font-size: 0.4em&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.font05&#123;font-size: 0.5em&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.font06&#123;font-size: 0.6em&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.font07&#123;font-size: 0.7em&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.font075&#123;font-size: 0.75em&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.font08&#123;font-size: 0.8em&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.font085&#123;font-size: 0.85em&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.font09&#123;font-size: 0.9em&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.font10&#123;font-size: 1.0em&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.font11&#123;font-size: 1.1em&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.font115&#123;font-size: 1.15em&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.font12&#123;font-size: 1.2em&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.font13&#123;font-size: 1.3em&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.font14&#123;font-size: 1.4em&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.font15&#123;font-size: 1.5em&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.font16&#123;font-size: 1.6em&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.font17&#123;font-size: 1.7em&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.font18&#123;font-size: 1.8em&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.font19&#123;font-size: 1.9em&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.font20&#123;font-size: 2em&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.font25&#123;font-size: 2.5em&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.font30&#123;font-size: 3em&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.font40&#123;font-size: 4em&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.font35&#123;font-size: 3.5em&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.font45&#123;font-size: 4.5em&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;/*首行缩进值为0*/\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.in0&#123;text-indent:0em&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;/*文本居中*/\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.center&#123;text-align:center !important;text-indent:0em;&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;/*文本居左*/\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.left&#123;text-align:left !important;duokan-text-indent:0em;text-indent:0em;&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;/*文本居右*/\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.right&#123;text-align:right !important;text-indent:0em;&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;/*斜体的字体样式*/\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.italic&#123;font-style:italic&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;/*倾斜的字体样式*/\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.oblique&#123;font-style:oblique&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;/*字体颜色控制*/\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.colorc1&#123;color:#000000&#125;/*书名颜色，默认黑色。*/\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.colorc2&#123;color:#000000&#125;/*卷数颜色，默认黑色。*/\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.color1&#123;color:#000000&#125;/*印象色，用于制作者人名、章节标题等处，默认黑色。*/\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;/*补充颜色写在下面，并注明用处*/\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;/*元素控制样式*/\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;/*td元素顶端对齐*/\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.tdtop&#123;vertical-align:top&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;/*td元素底端对齐*/\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.tdbottom&#123;vertical-align:bottom&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;/*td元素垂直居中对齐*/\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.tdmiddle&#123;vertical-align:middle&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;/*td元素水平居中*/\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.tdcenter&#123;margin-left:auto; margin-right:auto;&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;/*元素宽度*/\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.w05&#123;width:0.5em&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.w07&#123;width:0.7em&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.w09&#123;width:0.9em&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.w10&#123;width:1em&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.w11&#123;width:1.1em&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.w26&#123;width:2.6em&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.w33&#123;width:3.3em&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.w37&#123;width:3.7em&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.w40&#123;width:4em&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.w44&#123;width:4.4em&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.w55&#123;width:5.5em&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.w70&#123;width:70%%&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.w100&#123;width:100%%&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;/*元素顶部外边距*/\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.mtb13&#123;margin-top:-1.3em;&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.mtb09&#123;margin-top:-0.9em;&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.mtb05&#123;margin-top:-0.5em;&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.mtb03&#123;margin-top:-0.3em;&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.mt03&#123;margin-top:0.3em;&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.mt05&#123;margin-top:0.5em;&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.mt09&#123;margin-top:0.9em;&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.mt13&#123;margin-top:1.3em;&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.mt45&#123;margin-top:4.5em;&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;/*元素上下外边距*/\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.mbt05&#123;margin-top:0.5em; margin-bottom:0.5em;&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.mbt09&#123;margin-top:0.9em; margin-bottom:0.9em;&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.mbt15&#123;margin-top:1.5em; margin-bottom:1.5em;&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.mbt18&#123;margin-top:1.8em; margin-bottom:1.8em;&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;/*元素上下内边距*/\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.pbt09&#123;padding-top:0.9em; padding-bottom:0.9em;&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;/*行高控制*/\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.h04&#123;line-height:0.4;vertical-align:center;&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.h11&#123;line-height:1.1;vertical-align:center;&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.h20&#123;line-height:2;vertical-align:bottom;&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;/*标题样式*/\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.b-relative &#123;width: 30em;margin-left: auto;margin-right: auto;margin-top: 0.5em;margin-bottom: 0em;min-height: 20em;max-width:100%%;min-width:18em;&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.rota &#123;-o-transform: rotate(5deg);-ms-transform: rotate(5deg);-moz-transform: rotate(5deg);-webkit-transform:rotate(5deg);transform: rotate(5deg);&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.box1 &#123;width: 2em;height: 2em;border-radius: 15%%;padding: 0.5em;background-color: #000000;color: #FFFFFF;float: right;margin-top: -0.5em;margin-right: 0.5em;&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.box2 &#123;border-radius: 20%%;width: 1em;height: 1em;background-color: #000000;padding: 0.5em;color: #FFFFFF;float: right;margin-right: -3.5em;margin-top: 2em;&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.t-top &#123;font-size: 0.9em;margin-left: 1em;float: right;margin-top: 1em;color: #FFFFFF;margin-right: -2.7em;&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.f-right &#123;float: right;&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.f-left &#123;float: left;&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.tt &#123;margin-top: -0.9em;&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.tt1 &#123;margin: 0em;padding: 0em;text-indent: 0px;text-align: center;&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.tt2 &#123;margin-top: -2em;margin-right: 0.5em;text-align: center;&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.tt3 &#123;margin: 0em;padding: 0em;text-indent: 0px;text-align: center;&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.tl&#123;margin-top: 4em;&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.tr &#123;-o-transform: rotate(35deg);-ms-transform: rotate(35deg);-moz-transform: rotate(35deg);-webkit-transform: rotate(35deg);transform: rotate(35deg);&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.tr1 &#123;margin-top: -0.5em;text-indent: 0px;&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.shadow &#123;text-shadow: 1px 1px 5px #000000;color: #FFFFFF;&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.clear &#123;clear: both;&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.tt2 p &#123;margin-top: -0.1em;padding: 0em;text-indent: 0px;text-align: center;margin-bottom: 0em;margin-left: 0em;margin-right: 0em;&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;/*自定义*/\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.contents h2 &#123;padding: 0em;margin: 0.5em 0em 1em 0em;font-weight: bold;line-height: 120%%;font-size: 2.5em;&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.contents .box &#123;width: 25em;margin-left: auto;margin-right: auto;&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.contents table &#123;width: 100%%;&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.contents td &#123;padding: 0.25em 0.5em;text-align: left;&#125;\n&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;.border &#123;padding:0.5em;border: 1px solid #000000;&#125;\n&quot;</span>,fp);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">make_epub_frame</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> chapnum,picnum,illnum;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Now we are going to make a basic frame of an epub.\n&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Now tell me how many chapters do this book has?\n&quot;</span>);</span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">&quot; %d&quot;</span>,&amp;chapnum) &lt;= <span class="number">0</span>)&#123;</span><br><span class="line">        getchar();</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Please enter an integer such as 1 , 20 , 284.\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Now tell me how many pictures which are black and whit do this book has?\n&quot;</span>);</span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">&quot; %d&quot;</span>,&amp;picnum) &lt;= <span class="number">0</span>)&#123;</span><br><span class="line">        getchar();</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Please enter an integer such as 1 , 20 , 284.\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Now tell me how many colorful pictures do this book has?\n&quot;</span>);</span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">&quot; %d&quot;</span>,&amp;illnum) &lt;= <span class="number">0</span>)&#123;</span><br><span class="line">        getchar();</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Please enter an integer such as 1 , 20 , 284.\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    make_mimetype();</span><br><span class="line">    make_folder();</span><br><span class="line">    make_container();</span><br><span class="line">    make_content_toc_text(chapnum,picnum,illnum);</span><br><span class="line">    make_basicss();</span><br><span class="line">    <span class="keyword">return</span> chapnum;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//字体库需要自己额外加装和设置</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">char</span> path[<span class="number">40</span>] = <span class="string">&quot;BookName/OEBPS/Text/chapter001.xhtml&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">make_chapter</span><span class="params">(<span class="keyword">int</span> chapnum)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n = <span class="number">0</span>,test = <span class="number">-1</span>;</span><br><span class="line">    FILE * fp,* fw;</span><br><span class="line">    <span class="keyword">if</span>((fp = fopen(<span class="string">&quot;raw.txt&quot;</span>,<span class="string">&quot;r&quot;</span>)) == <span class="literal">NULL</span>)&#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Can\&#x27;t find the file.&quot;</span>);</span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">char</span> pa[<span class="number">40</span>];</span><br><span class="line">    <span class="keyword">while</span>((chapnum - n) != <span class="number">-1</span> &amp;&amp; test != n)&#123;</span><br><span class="line">        test = n;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">27</span>;i++)&#123;</span><br><span class="line">            pa[i] = path[i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">30</span>; i &lt;= <span class="number">40</span>;i++)&#123;</span><br><span class="line">            pa[i] = path[i];</span><br><span class="line">        &#125;</span><br><span class="line">        pa[<span class="number">27</span>] =path[<span class="number">27</span>] + n/<span class="number">100</span>;</span><br><span class="line">        pa[<span class="number">28</span>] =path[<span class="number">28</span>] + n/<span class="number">10</span> - (n/<span class="number">100</span>)*<span class="number">10</span>;</span><br><span class="line">        pa[<span class="number">29</span>] =path[<span class="number">29</span>] + n%<span class="number">10</span>;</span><br><span class="line">        <span class="keyword">char</span> ch;</span><br><span class="line">        fw = fopen(pa,<span class="string">&quot;w&quot;</span>);</span><br><span class="line">        <span class="built_in">fputs</span>(<span class="string">&quot;&lt;?xml version=\&quot;1.0\&quot; encoding=\&quot;utf-8\&quot;?&gt;\n&quot;</span>,fw);</span><br><span class="line">        <span class="built_in">fputs</span>(<span class="string">&quot;&lt;!DOCTYPE html PUBLIC \&quot;-//W3C//DTD XHTML 1.1//EN\&quot; \&quot;http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd\&quot;&gt;\n&quot;</span>,fw);</span><br><span class="line">        <span class="built_in">fputs</span>(<span class="string">&quot;&lt;html xmlns=\&quot;http://www.w3.org/1999/xhtml\&quot; xml:lang=\&quot;zh-CN\&quot;&gt;\n&quot;</span>,fw);</span><br><span class="line">        <span class="built_in">fputs</span>(<span class="string">&quot;\t&lt;head&gt;\n&quot;</span>,fw);</span><br><span class="line">        <span class="built_in">fputs</span>(<span class="string">&quot;\t\t&lt;title&gt;&lt;!--章节名称--&gt;&lt;/title&gt;\n&quot;</span>,fw);</span><br><span class="line">        <span class="built_in">fputs</span>(<span class="string">&quot;\t\t&lt;link href=\&quot;../Styles/style.css\&quot; type=\&quot;text/css\&quot; rel=\&quot;stylesheet\&quot;/&gt;\n&quot;</span>,fw);</span><br><span class="line">        <span class="built_in">fputs</span>(<span class="string">&quot;\t&lt;/head&gt;\n&quot;</span>,fw);</span><br><span class="line">        <span class="built_in">fputs</span>(<span class="string">&quot;\t&lt;body&gt;\n&quot;</span>,fw);</span><br><span class="line">        <span class="built_in">fputs</span>(<span class="string">&quot;\t\t&lt;h1 class=\&quot;fzzys\&quot;&gt;&lt;!--章节名称--&gt;&lt;/h1&gt;\n&quot;</span>,fw);</span><br><span class="line">        <span class="built_in">fputs</span>(<span class="string">&quot;\t\t&lt;p&gt;&quot;</span>,fw);</span><br><span class="line">        <span class="keyword">int</span> judge = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span>((ch = getc(fp)) != EOF)&#123;</span><br><span class="line">            <span class="keyword">if</span>(ch == <span class="string">&#x27;\r&#x27;</span>||ch == <span class="string">&#x27;\n&#x27;</span>)&#123;</span><br><span class="line">                <span class="keyword">if</span>(judge == <span class="number">0</span>) <span class="keyword">continue</span>;</span><br><span class="line">                <span class="built_in">fprintf</span>(fw,<span class="string">&quot;&lt;/p&gt;%c\t\t&lt;p&gt;&quot;</span>,ch);</span><br><span class="line">                judge = <span class="number">0</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(ch == <span class="string">&#x27;\&quot;&#x27;</span>)&#123;</span><br><span class="line">                <span class="built_in">fprintf</span>(fw,<span class="string">&quot;&amp;quot;&quot;</span>);</span><br><span class="line">                judge = <span class="number">1</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(ch == <span class="string">&#x27;&lt;&#x27;</span>)&#123;</span><br><span class="line">                <span class="built_in">fprintf</span>(fw,<span class="string">&quot;&amp;lt;&quot;</span>);</span><br><span class="line">                judge = <span class="number">1</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(ch == <span class="string">&#x27;&gt;&#x27;</span>)&#123;</span><br><span class="line">                <span class="built_in">fprintf</span>(fw,<span class="string">&quot;&amp;gt;&quot;</span>);</span><br><span class="line">                judge = <span class="number">1</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(ch == <span class="string">&#x27;$&#x27;</span>)&#123;</span><br><span class="line">                judge = <span class="number">1</span>;</span><br><span class="line">                n += <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(ch == <span class="string">&#x27; &#x27;</span> || ch == <span class="string">&#x27;\t&#x27;</span>)&#123;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                judge = <span class="number">1</span>;</span><br><span class="line">                <span class="built_in">fprintf</span>(fw,<span class="string">&quot;%c&quot;</span>,ch);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">fputs</span>(<span class="string">&quot;\t\t&lt;/p&gt;\n\t&lt;/body&gt;\n&quot;</span>,fw);</span><br><span class="line">        <span class="built_in">fputs</span>(<span class="string">&quot;&lt;/html&gt;\n&quot;</span>,fw);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> chapnum;</span><br><span class="line">    chapnum = make_epub_frame();</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;The frame is created.\n&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Now name a file named raw.txt.\n&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;If you wanna to leave.Do not creat the file or delete it.\n&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;If you wanna continue to create chapters,save the text of the chapter in the file.\n&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;You can enter $ to seperate the chapters.\n&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;If you are ready,enter to start.\n&quot;</span>);</span><br><span class="line">    system(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">    make_chapter(chapnum);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="C-不溢出的乘法"><a href="#C-不溢出的乘法" class="headerlink" title="C-不溢出的乘法"></a>C-不溢出的乘法</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> A 20000                                                         <span class="comment">//第一个乘数的位数</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> B 20000                                                         <span class="comment">//第二个乘数的位数</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span>                                                       <span class="comment">//输入输出</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string.h&gt;</span>                                                      <span class="comment">//计算数字长度</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;time.h&gt;</span>                                                        <span class="comment">//计算时间</span></span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> &#123;</span></span><br><span class="line">    <span class="keyword">char</span> m[<span class="number">2</span>];</span><br><span class="line">&#125;temporary;</span><br><span class="line"></span><br><span class="line">temporary tem[A];                                                       <span class="comment">//竖式两个横线之间，一位乘法的结果</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> &#123;</span></span><br><span class="line">    <span class="keyword">char</span> m[A];</span><br><span class="line">&#125;rpg;</span><br><span class="line"></span><br><span class="line">rpg temrpg[B];                                                          <span class="comment">//竖式里下面一个数字乘上面各位后得到的数字</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">initialtempo</span><span class="params">(temporary * pt)</span></span>&#123;                                      <span class="comment">//初始化</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i &lt; A;i++)&#123;</span><br><span class="line">        pt[i].m[<span class="number">0</span>] = pt[i].m[<span class="number">1</span>] = <span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">initialrpg</span><span class="params">(rpg * pt)</span></span>&#123;                                              <span class="comment">//初始化</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i &lt; B;i++)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> k = <span class="number">0</span>;k &lt; A;k++)&#123;</span><br><span class="line">            pt[i].m[k] = <span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">addend</span><span class="params">(rpg * pr,<span class="keyword">char</span> * c,<span class="keyword">int</span> la,<span class="keyword">int</span> lb)</span></span>&#123;                           <span class="comment">//将每一位乘a得到的结果相加</span></span><br><span class="line">    <span class="keyword">int</span> a[B] = &#123;<span class="number">0</span>&#125;;                                                     <span class="comment">//保存进位</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>,k = <span class="number">0</span>,r;i &lt; la + lb;i++,k = <span class="number">0</span>)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> p = <span class="number">0</span>;p &lt; i + <span class="number">1</span>;p++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(pr[i - p].m[p] != <span class="string">&#x27;\0&#x27;</span>) k += pr[i - p].m[p] - <span class="string">&#x27;0&#x27;</span>;       <span class="comment">//如果当位不为0，加上b中某位乘a的相应位数，用以替代加和时需要用的10^n</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(i - <span class="number">1</span> &gt;= <span class="number">0</span>) k += a[i - <span class="number">1</span>];                                   <span class="comment">//加上进位</span></span><br><span class="line">        r = k/<span class="number">10</span>;                                                       <span class="comment">//得到进位</span></span><br><span class="line">        k = k%<span class="number">10</span>;                                                       <span class="comment">//得到本位</span></span><br><span class="line">        a[i] = r;                                                       <span class="comment">//保存进位</span></span><br><span class="line">        c[i] = k + <span class="string">&#x27;0&#x27;</span>;                                                 <span class="comment">//保存本位</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> i = <span class="number">0</span>;                                                          <span class="comment">//用来得到数字的末尾</span></span><br><span class="line">    <span class="keyword">while</span>(c[la+lb-i] == <span class="string">&#x27;\0&#x27;</span>)&#123;                                          <span class="comment">//忽略&#x27;\0&#x27;</span></span><br><span class="line">        i += <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span>(c[la+lb-i] == <span class="string">&#x27;0&#x27;</span>)&#123;                                           <span class="comment">//忽略&#x27;0&#x27;</span></span><br><span class="line">        i += <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> f = la+lb-i+<span class="number">2</span>;                                                  <span class="comment">//保存结尾位置</span></span><br><span class="line">    <span class="keyword">char</span> temc[A+B];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>;j &lt; f - <span class="number">1</span>;j++)&#123;                                       <span class="comment">//获得最终数字的正常顺序</span></span><br><span class="line">        temc[j] = c[f - j - <span class="number">2</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>;j &lt; f - <span class="number">1</span>;j++)&#123;                                       <span class="comment">//返回给最初预留的数组</span></span><br><span class="line">        c[j] = temc[j];</span><br><span class="line">    &#125;</span><br><span class="line">    c[f - <span class="number">1</span>] = <span class="string">&#x27;\0&#x27;</span>;                                                    <span class="comment">//保险，给个结尾</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">addtem</span><span class="params">(temporary * pt,rpg * pr,<span class="keyword">int</span> la,<span class="keyword">int</span> lb,<span class="keyword">int</span> p)</span></span>&#123;               <span class="comment">//计算得到的每一位乘出的结果</span></span><br><span class="line">    <span class="keyword">int</span> a[B] = &#123;<span class="number">0</span>&#125;;                                                     <span class="comment">//逢十进一用的数组</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>,k = <span class="number">0</span>,r;i &lt; la + lb;i++,k = <span class="number">0</span>)&#123;                                               </span><br><span class="line">        <span class="keyword">if</span>(pt[i].m[<span class="number">0</span>] != <span class="string">&#x27;\0&#x27;</span>) k = pt[i].m[<span class="number">0</span>] - <span class="string">&#x27;0&#x27;</span>;                    <span class="comment">//如果当位不是0，把保存的第一位给当位</span></span><br><span class="line">        <span class="keyword">if</span>(i - <span class="number">1</span> &gt;= <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span>(pt[i - <span class="number">1</span>].m[<span class="number">1</span>] != <span class="string">&#x27;\0&#x27;</span>) k += pt[i - <span class="number">1</span>].m[<span class="number">1</span>] - <span class="string">&#x27;0&#x27;</span>;       <span class="comment">//如果上一位对应保存的第二位不为0，把保存的第二位给当位</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(i - <span class="number">1</span> &gt;= <span class="number">0</span>) k += a[i - <span class="number">1</span>];                                   <span class="comment">//如果上一位有进位，给当位</span></span><br><span class="line">        r = k/<span class="number">10</span>;                                                       <span class="comment">//是否有进位</span></span><br><span class="line">        k = k - r * <span class="number">10</span>;                                                 <span class="comment">//得到本位数字</span></span><br><span class="line">        a[i] = r;                                                       <span class="comment">//保存进位</span></span><br><span class="line">        pr[p].m[i] = k + <span class="string">&#x27;0&#x27;</span>;                                           <span class="comment">//保存当位数字</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">product</span><span class="params">(<span class="keyword">char</span> * a,<span class="keyword">char</span> *b,<span class="keyword">char</span> * c,temporary * pt,rpg * pr)</span></span>&#123;        <span class="comment">//乘法程序</span></span><br><span class="line">    <span class="keyword">clock_t</span> t1 = clock();                                               <span class="comment">//开始计时</span></span><br><span class="line">    <span class="keyword">char</span> tema[A] = &#123;<span class="string">&#x27;0&#x27;</span>&#125;,temb[B] = &#123;<span class="string">&#x27;0&#x27;</span>&#125;;                               <span class="comment">//初始化两个数字的倒序形式，如123，记为321</span></span><br><span class="line">    <span class="keyword">int</span> la = <span class="built_in">strlen</span>(a),lb = <span class="built_in">strlen</span>(b);                                  <span class="comment">//保存两个数字的实际位数</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i &lt; la;i++)&#123;                                          <span class="comment">//倒序a</span></span><br><span class="line">        tema[i] = a[la - i - <span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    tema[la] = <span class="string">&#x27;\0&#x27;</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i &lt; lb;i++)&#123;                                          <span class="comment">//倒序b</span></span><br><span class="line">        temb[i] = b[lb - i - <span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    temb[lb] = <span class="string">&#x27;\0&#x27;</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i &lt; lb;i++)&#123;                                          <span class="comment">//用b的每一位乘a并保存结果，分为第一位（0）和第二位（1）。（第二位可以为0）</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> p = <span class="number">0</span>,q = <span class="number">0</span>,r;p &lt; la;p++,q = <span class="number">0</span>)&#123;</span><br><span class="line">            q = (tema[p] - <span class="string">&#x27;0&#x27;</span>) * (temb[i] - <span class="string">&#x27;0&#x27;</span>);                      <span class="comment">//个位乘法</span></span><br><span class="line">            r = q/<span class="number">10</span>;                                                   <span class="comment">//是否有进位</span></span><br><span class="line">            pt[p].m[<span class="number">0</span>] = q - r * <span class="number">10</span> + <span class="string">&#x27;0&#x27;</span>;                              <span class="comment">//得到第一位</span></span><br><span class="line">            pt[p].m[<span class="number">1</span>] = r + <span class="string">&#x27;0&#x27;</span>;                                       <span class="comment">//得到第二位</span></span><br><span class="line">        &#125;</span><br><span class="line">        addtem(pt,pr,la,lb,i);                                          <span class="comment">//计算每一位乘a得到的结果</span></span><br><span class="line">    &#125;</span><br><span class="line">    addend(pr,c,la,lb);                                                 <span class="comment">//将以上每一位乘a得到的结果相加</span></span><br><span class="line">    <span class="keyword">clock_t</span> t2 = clock();                                               <span class="comment">//计时结束</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%s&quot;</span>,c);                                                     <span class="comment">//打印数字</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;\n\n%d&quot;</span>,t2 - t1);                                           <span class="comment">//打印时间</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">char</span> a[A] = &#123;<span class="string">&#x27;0&#x27;</span>&#125;,b[B] = &#123;<span class="string">&#x27;0&#x27;</span>&#125;,c[A+B] = &#123;<span class="string">&#x27;0&#x27;</span>&#125;;                          <span class="comment">//保存两个数字并为结果预留空间</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*To calculate the product of a and b.(each of them must be positive)</span></span><br><span class="line"><span class="comment">**</span></span><br><span class="line"><span class="comment">**我们小学学习的竖式乘法算法如下：</span></span><br><span class="line"><span class="comment">**</span></span><br><span class="line"><span class="comment">**  1 2 3 4 5</span></span><br><span class="line"><span class="comment">**X         4</span></span><br><span class="line"><span class="comment">**___________</span></span><br><span class="line"><span class="comment">**        2 0</span></span><br><span class="line"><span class="comment">**      1 6</span></span><br><span class="line"><span class="comment">**    1 2</span></span><br><span class="line"><span class="comment">**    8</span></span><br><span class="line"><span class="comment">**  4    </span></span><br><span class="line"><span class="comment">**___________</span></span><br><span class="line"><span class="comment">**  4 9 3 8 0</span></span><br><span class="line"><span class="comment">**</span></span><br><span class="line"><span class="comment">**该乘法原理即为上式</span></span><br><span class="line"><span class="comment">**如果第二个乘数位数比第一个乘数位数小，计算会更快。</span></span><br><span class="line"><span class="comment">**所有数字计算的时候均用倒序形式，如123变成321计算</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    temporary * pt = tem;                                               <span class="comment">//传递结构数据</span></span><br><span class="line">    rpg * pr = temrpg;                                                  <span class="comment">//传递结构数据</span></span><br><span class="line">    initialtempo(pt);                                                   <span class="comment">//初始化</span></span><br><span class="line">    initialrpg(pr);                                                     <span class="comment">//初始化</span></span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%s %s&quot;</span>,a,b);                                                 <span class="comment">//读取两个乘数</span></span><br><span class="line">    product(a,b,c,pt,pr);                                               <span class="comment">//计算并打印</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="C-数字炸弹"><a href="#C-数字炸弹" class="headerlink" title="C-数字炸弹"></a>C-数字炸弹</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="comment">//变量</span></span><br><span class="line">    <span class="keyword">char</span> c_TheRequest = <span class="number">1</span>;<span class="comment">//开始界面的字符</span></span><br><span class="line">    <span class="keyword">int</span> in_Deltar = <span class="number">1</span>,in_EnteredNumber,in_Sig;<span class="comment">//游戏中输入数字及其判定所需要的数字</span></span><br><span class="line">    <span class="keyword">int</span> in_GivenNum = <span class="number">0</span>,in_An = <span class="number">0</span>,in_Bn = <span class="number">0</span>;<span class="comment">//出的数字，和数字区间</span></span><br><span class="line">    <span class="keyword">int</span> in_Mid;<span class="comment">//用来交换An、Bn的值以满足An&lt;Bn的中间量</span></span><br><span class="line">    <span class="keyword">int</span> in_DistantAn,in_DistantBn;<span class="comment">//An与Bn离num的距离</span></span><br><span class="line">    <span class="keyword">int</span> in_TemporaryAnSaver,in_TemporaryBnSaver;<span class="comment">//临时用于比较的An、Bn储存器</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//开始界面</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;If you just happen to open the game and do not have the intention to play it.\n&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;You can enter a q to quit or you can enter an s to start the game now!\n&quot;</span>);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%c&quot;</span>,&amp;c_TheRequest);</span><br><span class="line">    getchar();</span><br><span class="line">    <span class="keyword">while</span> (c_TheRequest != <span class="string">&#x27;s&#x27;</span> &amp;&amp; c_TheRequest != <span class="string">&#x27;q&#x27;</span>)&#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Please do not enter a irrelevant letter.\n&quot;</span>);</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%c&quot;</span>,&amp;c_TheRequest);</span><br><span class="line">        getchar();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(c_TheRequest == <span class="string">&#x27;q&#x27;</span>)&#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;So sad then.Hope you can play with me next time.\n&quot;</span>);</span><br><span class="line">        getchar();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//游戏</span></span><br><span class="line">    <span class="keyword">if</span>(c_TheRequest == <span class="string">&#x27;s&#x27;</span>)&#123;</span><br><span class="line">        <span class="comment">//输入“数字炸弹”</span></span><br><span class="line">        system(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;(^ o ^) # *** NOW LET\&#x27;S PLAY! *** # (^ o ^)\nAttention!You can only enter numbers in the following steps.\nEnter to start.\n&quot;</span>);</span><br><span class="line">        getchar();</span><br><span class="line">        system(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Game : The number boom!(Another Life.)\n&quot;</span>);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Rule:\n&quot;</span>);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;The first player should enter a number.Then he should give to numbers and guarantee the number above is between them.\n&quot;</span>);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;The rest should guess and enter the numbers.And the one who enter the exact number the first player entered\n&quot;</span>);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;is supported to be the winner!\n&quot;</span>);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Please Enter a number to start the game.(You is ought not to expose it to other players.The number should bigger than 0.)\n&quot;</span>);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;__________\b\b\b\b\b\b\b\b\b\b\b&quot;</span>);</span><br><span class="line">        <span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;in_GivenNum) != <span class="number">1</span> || in_GivenNum &lt; <span class="number">0</span>)&#123;</span><br><span class="line">            system(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;Please Enter a NUMBER which is bigger than 0.\n&quot;</span>);</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;num:___________\b\b\b\b\b\b\b\b\b\b\b&quot;</span>);</span><br><span class="line">            getchar();</span><br><span class="line">        &#125;</span><br><span class="line">        system(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">        <span class="comment">//判定是否为数字</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//输入“数字炸弹”所在的区间</span></span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;And where is the number?Please enter two numbers,and ensure that the number above is between them.\n&quot;</span>);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Additionally,there should be at least 100 numbers between the two numbers you will enter.\n&quot;</span>);</span><br><span class="line">        <span class="keyword">do</span>&#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;num = %d\n&quot;</span>,in_GivenNum);</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;A:__________\b\b\b\b\b\b\b\b\b\b&quot;</span>);</span><br><span class="line">            <span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;in_An)!=<span class="number">1</span>)&#123;</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;Please Enter a NUMBER which is bigger or smaller than the \&quot;num\&quot;!!!!\n&quot;</span>);</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;A:__________\b\b\b\b\b\b\b\b\b\b&quot;</span>);</span><br><span class="line">                <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;in_An);</span><br><span class="line">                getchar();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;B:__________\b\b\b\b\b\b\b\b\b\b&quot;</span>);</span><br><span class="line">            <span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;in_Bn)!=<span class="number">1</span>)&#123;</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;Please Enter a NUMBER which is bigger or smaller than the \&quot;num\&quot;!!!!\n&quot;</span>);</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;B:__________\b\b\b\b\b\b\b\b\b\b&quot;</span>);</span><br><span class="line">                <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;in_Bn);</span><br><span class="line">                getchar();</span><br><span class="line">            &#125;<span class="comment">//记录An和Bn</span></span><br><span class="line">            <span class="keyword">if</span>(!(( in_An &lt; in_GivenNum &amp;&amp; in_Bn &gt; in_GivenNum ) || ( in_An &gt; in_GivenNum &amp;&amp; in_Bn &lt; in_GivenNum )))&#123;</span><br><span class="line">                system(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;Your math is so poor.Enter a again!\nThe \&quot;num\&quot; must be between the two numbers.\n&quot;</span>);</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;Enter to restart.\n&quot;</span>);</span><br><span class="line">                getchar();</span><br><span class="line">                getchar();</span><br><span class="line">                system(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">            &#125;<span class="comment">//区间如果错误就会报错</span></span><br><span class="line">        &#125;<span class="keyword">while</span>(!(( in_An &lt; in_GivenNum &amp;&amp; in_Bn &gt; in_GivenNum ) || ( in_An &gt; in_GivenNum &amp;&amp; in_Bn &lt; in_GivenNum )));<span class="comment">//判定区间是不是对的</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//排序</span></span><br><span class="line">        <span class="keyword">if</span>(in_An &gt; in_Bn)&#123;</span><br><span class="line">            in_Mid = in_An;</span><br><span class="line">            in_An = in_Bn;</span><br><span class="line">            in_Bn = in_Mid;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//开始猜数字</span></span><br><span class="line">        system(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Now the game starts!\n&quot;</span>);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;The number is somewhere between %d and %d\n&quot;</span>,in_An,in_Bn);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Please enter the number.\n&quot;</span>);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;__________\b\b\b\b\b\b\b\b\b\b&quot;</span>);</span><br><span class="line">        <span class="keyword">while</span>(in_Deltar != <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;in_EnteredNumber)!=<span class="number">1</span>)&#123;</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;Please Enter a NUMBER!!!!\n&quot;</span>);</span><br><span class="line">                <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;in_EnteredNumber);</span><br><span class="line">                getchar();</span><br><span class="line">            &#125;<span class="comment">//判断是否为数字</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">//差的运算</span></span><br><span class="line">            in_Deltar = ((in_GivenNum - in_EnteredNumber)&lt;<span class="number">0</span>)?in_EnteredNumber - in_GivenNum:in_GivenNum - in_EnteredNumber;</span><br><span class="line">            in_Sig = in_GivenNum - in_EnteredNumber;</span><br><span class="line">            in_DistantAn = in_GivenNum - in_An;</span><br><span class="line">            in_DistantBn = in_Bn - in_GivenNum;</span><br><span class="line"></span><br><span class="line">            <span class="comment">//判定差的大小</span></span><br><span class="line">            <span class="keyword">if</span>(in_Deltar &gt;= <span class="number">1000</span>)&#123;</span><br><span class="line">                <span class="keyword">if</span>(in_Sig &gt; <span class="number">0</span>)</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;Too small!Next!\n&quot;</span>);</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;Too big!Next!\n&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(in_Deltar &gt;= <span class="number">100</span>)&#123;</span><br><span class="line">                <span class="keyword">if</span>(in_Sig &gt; <span class="number">0</span>)</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;Small.Next!\n&quot;</span>);</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;Big.Next!\n&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(in_Deltar &gt;= <span class="number">10</span>)&#123;</span><br><span class="line">                <span class="keyword">if</span>(in_Sig &gt; <span class="number">0</span>)</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;A little small.Next!\n&quot;</span>);</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;A little big.Next!\n&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(in_Deltar &gt; <span class="number">0</span>)&#123;</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;Almost there!NEXT!!!\n&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">//临时存储，以便后面判断所给数字是否满足条件</span></span><br><span class="line">            in_TemporaryAnSaver = in_An;</span><br><span class="line">            in_TemporaryBnSaver = in_Bn;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span>(( in_Deltar &lt; in_DistantAn &amp;&amp; in_Sig &gt; <span class="number">0</span> ) || ( in_Deltar &lt; in_DistantBn &amp;&amp; in_Sig &lt; <span class="number">0</span> ))&#123;</span><br><span class="line">                <span class="keyword">if</span>(in_Sig &gt; <span class="number">0</span>)</span><br><span class="line">                in_An = in_EnteredNumber;</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                in_Bn = in_EnteredNumber;</span><br><span class="line">            &#125;<span class="comment">//这是修改上下限</span></span><br><span class="line">            <span class="keyword">if</span>((in_TemporaryAnSaver == in_An &amp;&amp; in_TemporaryBnSaver == in_Bn) &amp;&amp; in_Deltar)&#123;</span><br><span class="line">                system(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;Do not cheat!\nYou should play it again.\n&quot;</span>);</span><br><span class="line">            &#125;<span class="comment">//判定所猜的数字是否在区间内</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span>(in_Deltar == <span class="number">0</span>)</span><br><span class="line">            <span class="keyword">break</span>;<span class="comment">//猜中</span></span><br><span class="line">            </span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;Enter to continue.\n&quot;</span>);</span><br><span class="line">            getchar();</span><br><span class="line">            getchar();</span><br><span class="line">            system (<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;Between %d and %d\n__________\b\b\b\b\b\b\b\b\b\b&quot;</span>,in_An,in_Bn);<span class="comment">//区间修正</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;You are the one !!!&quot;</span>);</span><br><span class="line">        getchar();</span><br><span class="line">        getchar();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Go-框架Gin的简单运用"><a href="#Go-框架Gin的简单运用" class="headerlink" title="Go-框架Gin的简单运用"></a>Go-框架Gin的简单运用</h2><h3 id="db-json"><a href="#db-json" class="headerlink" title="db.json"></a>db.json</h3><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;20201234&quot;</span>:&#123;</span><br><span class="line">        <span class="attr">&quot;email&quot;</span>:<span class="string">&quot;20201234@neu.edu&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;pwd&quot;</span>:<span class="string">&quot;20201234&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">&quot;20203302&quot;</span>:&#123;</span><br><span class="line">        <span class="attr">&quot;email&quot;</span>:<span class="string">&quot;20203302@neu.edu&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;pwd&quot;</span>:<span class="string">&quot;20020214&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">&quot;20207710&quot;</span>:&#123;</span><br><span class="line">        <span class="attr">&quot;email&quot;</span>:<span class="string">&quot;20207710@neu.edu&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;pwd&quot;</span>:<span class="string">&quot;20020214&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="post-json"><a href="#post-json" class="headerlink" title="post.json"></a>post.json</h3><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;Posts&quot;</span>:</span><br><span class="line">  [</span><br><span class="line">    [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">&quot;tag&quot;</span>: <span class="string">&quot;test1&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;description&quot;</span>: <span class="string">&quot;This tag is utilized to test data&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;pNum&quot;</span>: <span class="number">1</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">&quot;id&quot;</span>: <span class="string">&quot;1&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;author&quot;</span>: <span class="string">&quot;admin&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;test&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;title&quot;</span>: <span class="string">&quot;Test&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;content&quot;</span>: <span class="string">&quot;&lt;p&gt;this is a test post&lt;/p&gt;&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">&quot;tag&quot;</span>: <span class="string">&quot;test2&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;description&quot;</span>: <span class="string">&quot;This tag is utilized to test data&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;pNum&quot;</span>: <span class="number">1</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">&quot;id&quot;</span>: <span class="string">&quot;1&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;author&quot;</span>: <span class="string">&quot;admin&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;test&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;title&quot;</span>: <span class="string">&quot;Test&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;content&quot;</span>: <span class="string">&quot;&lt;p&gt;this is a test post&lt;/p&gt;&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">&quot;totaltag&quot;</span>: <span class="number">2</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Source-Code"><a href="#Source-Code" class="headerlink" title="Source Code"></a>Source Code</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;crypto/md5&quot;</span></span><br><span class="line">    <span class="string">&quot;encoding/json&quot;</span></span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">    <span class="string">&quot;io/ioutil&quot;</span></span><br><span class="line">    <span class="string">&quot;net/http&quot;</span></span><br><span class="line">    <span class="string">&quot;os&quot;</span></span><br><span class="line">    <span class="string">&quot;regexp&quot;</span></span><br><span class="line">    <span class="string">&quot;strconv&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="string">&quot;github.com/gin-gonic/gin&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">getJsonContent</span><span class="params">(path <span class="keyword">string</span>)</span> <span class="params">(<span class="keyword">string</span>, error)</span></span> &#123;</span><br><span class="line">    jsonFile, err := os.Open(path)</span><br><span class="line">    <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">        fmt.Println(err)</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&quot;</span>, <span class="literal">nil</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">defer</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">        err = jsonFile.Close()</span><br><span class="line">        <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">            fmt.Println(err)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;()</span><br><span class="line"></span><br><span class="line">    byteValue, _ := ioutil.ReadAll(jsonFile)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">string</span>(byteValue), err</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">getUserNamePassword</span><span class="params">(path <span class="keyword">string</span>)</span> <span class="title">map</span>[<span class="title">string</span>]<span class="title">map</span>[<span class="title">string</span>]<span class="title">string</span></span> &#123;</span><br><span class="line">    byteValue, err := getJsonContent(<span class="string">&quot;db.json&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">        fmt.Println(err)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> unp <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span></span><br><span class="line"></span><br><span class="line">    err = json.Unmarshal([]<span class="keyword">byte</span>(byteValue), &amp;unp)</span><br><span class="line">    <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">        fmt.Println(err)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> unp</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">refreshUserNamePassword</span><span class="params">(path <span class="keyword">string</span>, unp <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span>)</span> <span class="title">error</span></span> &#123;</span><br><span class="line">    jsonFile, err := os.OpenFile(path, os.O_RDWR, <span class="number">0666</span>)</span><br><span class="line">    <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">        fmt.Println(err)</span><br><span class="line">        <span class="keyword">return</span> err</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">defer</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">        err = jsonFile.Close()</span><br><span class="line">        <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">            fmt.Println(err)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;()</span><br><span class="line"></span><br><span class="line">    jsonUNP, err := json.Marshal(unp)</span><br><span class="line">    <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">        fmt.Println(err)</span><br><span class="line">        <span class="keyword">return</span> err</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    _, err = jsonFile.Write(jsonUNP)</span><br><span class="line">    <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">        fmt.Println(err)</span><br><span class="line">        <span class="keyword">return</span> err</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    router := gin.Default()</span><br><span class="line"></span><br><span class="line">    grep, err := regexp.Compile(<span class="string">`.+@.+\.[a-z]+`</span>)</span><br><span class="line"></span><br><span class="line">    secureKey := <span class="string">&quot;123&quot;</span></span><br><span class="line"></span><br><span class="line">    text := <span class="string">`</span></span><br><span class="line"><span class="string">------------------------------------------------------------------------------------------</span></span><br><span class="line"><span class="string">登录格式:  localhost:8081/v1/usr/login?name=20203302&amp;pwd=20020214</span></span><br><span class="line"><span class="string">注册格式:  localhost:8081/v1/usr/regin?name=20203302&amp;pwd=20020214&amp;email=1234@1234.com</span></span><br><span class="line"><span class="string">饼干格式:  localhost:8081/v1/usr/cookie?name=20203302&amp;pwd=20020214&amp;age=123</span></span><br><span class="line"><span class="string">获取原始内容:</span></span><br><span class="line"><span class="string"> - localhost:8081/v1/list/get-post</span></span><br><span class="line"><span class="string"> - localhost:8081/v1/list/get-user</span></span><br><span class="line"><span class="string">------------------------------------------------------------------------------------------</span></span><br><span class="line"><span class="string">`</span></span><br><span class="line">    fmt.Println(text)</span><br><span class="line"></span><br><span class="line">    v1 := router.Group(<span class="string">&quot;/v1&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">        v1.GET(<span class="string">&quot;/usr/:action&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">            action := c.Param(<span class="string">&quot;action&quot;</span>)</span><br><span class="line">            <span class="keyword">switch</span> action &#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;login&quot;</span>:</span><br><span class="line">                unp := getUserNamePassword(<span class="string">&quot;db.json&quot;</span>)</span><br><span class="line">                name := c.Query(<span class="string">&quot;name&quot;</span>)</span><br><span class="line">                pwd := c.Query(<span class="string">&quot;pwd&quot;</span>)</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> unp == <span class="literal">nil</span> &#123;</span><br><span class="line">                    c.JSON(http.StatusOK, gin.H&#123;</span><br><span class="line">                        <span class="string">&quot;message&quot;</span>: <span class="string">&quot;Database No Found&quot;</span>,</span><br><span class="line">                    &#125;)</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> v, ok := unp[name][<span class="string">&quot;pwd&quot;</span>]; ok &amp;&amp; v == pwd &#123;</span><br><span class="line">                    md5Inst := md5.New()</span><br><span class="line">                    md5Inst.Write([]<span class="keyword">byte</span>(name + pwd))</span><br><span class="line">                    c.JSON(http.StatusOK, gin.H&#123;</span><br><span class="line">                        <span class="string">&quot;message&quot;</span>: <span class="string">&quot;Right Password&quot;</span>,</span><br><span class="line">                        <span class="string">&quot;uuid&quot;</span>:    md5Inst.Sum([]<span class="keyword">byte</span>(secureKey)),</span><br><span class="line">                    &#125;)</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> ok &amp;&amp; v != pwd &#123;</span><br><span class="line">                    c.JSON(http.StatusOK, gin.H&#123;</span><br><span class="line">                        <span class="string">&quot;message&quot;</span>: <span class="string">&quot;Wrong Password&quot;</span>,</span><br><span class="line">                    &#125;)</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> !ok &#123;</span><br><span class="line">                    c.JSON(http.StatusOK, gin.H&#123;</span><br><span class="line">                        <span class="string">&quot;message&quot;</span>: <span class="string">&quot;Wrong Name&quot;</span>,</span><br><span class="line">                    &#125;)</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;regin&quot;</span>:</span><br><span class="line">                unp := getUserNamePassword(<span class="string">&quot;db.json&quot;</span>)</span><br><span class="line">                name := c.Query(<span class="string">&quot;name&quot;</span>)</span><br><span class="line">                pwd := c.Query(<span class="string">&quot;pwd&quot;</span>)</span><br><span class="line">                email := c.Query(<span class="string">&quot;email&quot;</span>)</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> unp == <span class="literal">nil</span> &#123;</span><br><span class="line">                    c.JSON(http.StatusOK, gin.H&#123;</span><br><span class="line">                        <span class="string">&quot;message&quot;</span>: <span class="string">&quot;Database No Found&quot;</span>,</span><br><span class="line">                    &#125;)</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">                    c.JSON(http.StatusOK, gin.H&#123;</span><br><span class="line">                        <span class="string">&quot;message&quot;</span>: <span class="string">&quot;Regular Expression Error&quot;</span>,</span><br><span class="line">                    &#125;)</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> result := grep.FindAllString(email, <span class="number">-1</span>); <span class="built_in">len</span>(result) == <span class="number">0</span> &#123;</span><br><span class="line">                    c.JSON(http.StatusOK, gin.H&#123;</span><br><span class="line">                        <span class="string">&quot;message&quot;</span>: <span class="string">&quot;Wrong email&quot;</span>,</span><br><span class="line">                    &#125;)</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> _, ok := unp[name][<span class="string">&quot;pwd&quot;</span>]; ok &#123;</span><br><span class="line">                    c.JSON(http.StatusOK, gin.H&#123;</span><br><span class="line">                        <span class="string">&quot;message&quot;</span>: <span class="string">&quot;Name already exist&quot;</span>,</span><br><span class="line">                    &#125;)</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    unp[name] = <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span>&#123;<span class="string">&quot;pwd&quot;</span>: pwd, <span class="string">&quot;email&quot;</span>: email&#125;</span><br><span class="line"></span><br><span class="line">                    err = refreshUserNamePassword(<span class="string">&quot;db.json&quot;</span>, unp)</span><br><span class="line">                    <span class="keyword">if</span> err == <span class="literal">nil</span> &#123;</span><br><span class="line">                        md5Inst := md5.New()</span><br><span class="line">                        md5Inst.Write([]<span class="keyword">byte</span>(name + pwd))</span><br><span class="line">                        c.JSON(http.StatusOK, gin.H&#123;</span><br><span class="line">                            <span class="string">&quot;message&quot;</span>: <span class="string">&quot;Registered Successfully&quot;</span>,</span><br><span class="line">                            <span class="string">&quot;uuid&quot;</span>:    md5Inst.Sum([]<span class="keyword">byte</span>(secureKey)),</span><br><span class="line">                        &#125;)</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        c.JSON(http.StatusOK, gin.H&#123;</span><br><span class="line">                            <span class="string">&quot;message&quot;</span>: <span class="string">&quot;Register Fail&quot;</span>,</span><br><span class="line">                        &#125;)</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;cookie&quot;</span>:</span><br><span class="line">                name := c.Query(<span class="string">&quot;name&quot;</span>)</span><br><span class="line">                pwd := c.Query(<span class="string">&quot;pwd&quot;</span>)</span><br><span class="line">                age := c.Query(<span class="string">&quot;age&quot;</span>)</span><br><span class="line">                md5Inst := md5.New()</span><br><span class="line">                md5Inst.Write([]<span class="keyword">byte</span>(name + pwd))</span><br><span class="line">                intAge, err := strconv.Atoi(age)</span><br><span class="line">                <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">                    fmt.Println(err)</span><br><span class="line">                    c.JSON(http.StatusOK, gin.H&#123;</span><br><span class="line">                        <span class="string">&quot;message&quot;</span>: <span class="string">&quot;Wrong Age&quot;</span>,</span><br><span class="line">                    &#125;)</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                c.SetCookie(name, <span class="keyword">string</span>(md5Inst.Sum([]<span class="keyword">byte</span>(secureKey))), intAge*<span class="number">60</span>*<span class="number">60</span>*<span class="number">24</span>,</span><br><span class="line">                    <span class="string">&quot;/&quot;</span>, <span class="string">&quot;localhost&quot;</span>, <span class="literal">true</span>, <span class="literal">true</span>)</span><br><span class="line"></span><br><span class="line">                c.JSON(http.StatusOK, gin.H&#123;</span><br><span class="line">                    <span class="string">&quot;message&quot;</span>: <span class="string">&quot;Get Cookie Successfully&quot;</span>,</span><br><span class="line">                &#125;)</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;&quot;</span>:</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">        v1.GET(<span class="string">&quot;/list/get-post&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">            posts, _ := getJsonContent(<span class="string">&quot;post.json&quot;</span>)</span><br><span class="line">            c.String(http.StatusOK, posts)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">        v1.GET(<span class="string">&quot;/list/get-user&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">            posts, _ := getJsonContent(<span class="string">&quot;db.json&quot;</span>)</span><br><span class="line">            c.String(http.StatusOK, posts)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">        router.NoRoute(<span class="function"><span class="keyword">func</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">            c.JSON(http.StatusNotFound, gin.H&#123;</span><br><span class="line">                <span class="string">&quot;status&quot;</span>: <span class="number">404</span>,</span><br><span class="line">                <span class="string">&quot;error&quot;</span>:  <span class="string">&quot;404, page not exists!&quot;</span>,</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;()</span><br><span class="line"></span><br><span class="line">    err = router.Run(<span class="string">&quot;:8081&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">        fmt.Println(err)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="JavaScript-闭包-amp-记忆函数"><a href="#JavaScript-闭包-amp-记忆函数" class="headerlink" title="JavaScript-闭包&amp;记忆函数"></a>JavaScript-闭包&amp;记忆函数</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> g = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> memo = &#123;<span class="string">&quot;0&quot;</span>: <span class="literal">false</span>, <span class="string">&quot;1&quot;</span>: <span class="literal">false</span>, <span class="string">&quot;2&quot;</span>:<span class="literal">true</span>, <span class="string">&quot;3&quot;</span>:<span class="literal">true</span>&#125;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">isPrime</span>(<span class="params">p</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (p &lt; <span class="number">3</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> memo[p]</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">for</span> (x <span class="keyword">in</span> memo) &#123;</span><br><span class="line">                <span class="keyword">if</span> (memo[x] &amp;&amp; x * x &lt;= p) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (p % x == <span class="number">0</span>) &#123;</span><br><span class="line">                        <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">                    &#125;   </span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> (memo[p] = <span class="literal">true</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="string">&quot;isPrime&quot;</span>: isPrime,</span><br><span class="line">        <span class="string">&quot;show&quot;</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(memo)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;()</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">1000</span>; i++) &#123;</span><br><span class="line">    g.isPrime(i)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">g.show()</span><br></pre></td></tr></table></figure>

<h2 id="Go-关键字defer测试"><a href="#Go-关键字defer测试" class="headerlink" title="Go-关键字defer测试"></a>Go-关键字defer测试</h2><h3 id="Test-Code-1"><a href="#Test-Code-1" class="headerlink" title="Test Code 1"></a>Test Code 1</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">deferTest1</span><span class="params">()</span> <span class="title">int</span></span> &#123;</span><br><span class="line">    c := <span class="number">10</span></span><br><span class="line">    <span class="keyword">defer</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">        c += <span class="number">10</span></span><br><span class="line">        fmt.Printf(<span class="string">&quot;Test 1 defer 1: %v\n&quot;</span>, c)</span><br><span class="line">    &#125;()</span><br><span class="line">    c += <span class="number">10</span></span><br><span class="line">    fmt.Printf(<span class="string">&quot;Test 1 in func: %v\n&quot;</span>, c)</span><br><span class="line">    <span class="keyword">defer</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">        c += <span class="number">10</span></span><br><span class="line">        fmt.Printf(<span class="string">&quot;Test 1 defer 2: %v\n&quot;</span>, c)</span><br><span class="line">    &#125;()</span><br><span class="line">    <span class="keyword">return</span> c</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">deferTest2</span><span class="params">()</span> <span class="params">(c <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">    c = <span class="number">10</span></span><br><span class="line">    <span class="keyword">defer</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">        c += <span class="number">10</span></span><br><span class="line">        fmt.Printf(<span class="string">&quot;Test 2 defer 1: %v\n&quot;</span>, c)</span><br><span class="line">    &#125;()</span><br><span class="line">    c += <span class="number">10</span></span><br><span class="line">    fmt.Printf(<span class="string">&quot;Test 2 in func: %v\n&quot;</span>, c)</span><br><span class="line">    <span class="keyword">defer</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">        c += <span class="number">10</span></span><br><span class="line">        fmt.Printf(<span class="string">&quot;Test 2 defer 2: %v\n&quot;</span>, c)</span><br><span class="line">    &#125;()</span><br><span class="line">    <span class="keyword">return</span> c</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">deferTest3</span><span class="params">()</span> *<span class="title">int</span></span> &#123;</span><br><span class="line">    c := <span class="number">10</span></span><br><span class="line">    <span class="keyword">defer</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">        c += <span class="number">10</span></span><br><span class="line">        fmt.Printf(<span class="string">&quot;Test 3 defer 1: %v\n&quot;</span>, c)</span><br><span class="line">    &#125;()</span><br><span class="line">    c += <span class="number">10</span></span><br><span class="line">    fmt.Printf(<span class="string">&quot;Test 3 in func: %v\n&quot;</span>, c)</span><br><span class="line">    <span class="keyword">defer</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">        c += <span class="number">10</span></span><br><span class="line">        fmt.Printf(<span class="string">&quot;Test 3 defer 2: %v\n&quot;</span>, c)</span><br><span class="line">    &#125;()</span><br><span class="line">    <span class="keyword">return</span> &amp;c</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    fmt.Printf(<span class="string">&quot;Test 1 return: %v\tret val not declared in definition\n&quot;</span>, deferTest1())</span><br><span class="line">    fmt.Printf(<span class="string">&quot;Test 2 return: %v\tret val declared in definition\n&quot;</span>, deferTest2())</span><br><span class="line">    fmt.Printf(<span class="string">&quot;Test 3 return: %v\tret val is the pointer\n&quot;</span>, *deferTest3())</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Test 1 in func: 20</span><br><span class="line">Test 1 defer 2: 30</span><br><span class="line">Test 1 defer 1: 40</span><br><span class="line">Test 1 return: 20       ret val not declared in definition</span><br><span class="line">Test 2 in func: 20</span><br><span class="line">Test 2 defer 2: 30</span><br><span class="line">Test 2 defer 1: 40</span><br><span class="line">Test 2 return: 40       ret val declared in definition</span><br><span class="line">Test 3 in func: 20</span><br><span class="line">Test 3 defer 2: 30</span><br><span class="line">Test 3 defer 1: 40</span><br><span class="line">Test 3 return: 40       ret val is the pointer</span><br></pre></td></tr></table></figure>

<h3 id="Test-Code-2"><a href="#Test-Code-2" class="headerlink" title="Test Code 2"></a>Test Code 2</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">deferTest1</span><span class="params">()</span> <span class="title">int</span></span> &#123;</span><br><span class="line">    c := <span class="number">10</span></span><br><span class="line">    <span class="keyword">defer</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">        c += <span class="number">10</span></span><br><span class="line">        fmt.Printf(<span class="string">&quot;Test 1 defer 1: %v\n&quot;</span>, c)</span><br><span class="line">        <span class="keyword">defer</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">            c += <span class="number">10</span></span><br><span class="line">        &#125;()</span><br><span class="line">    &#125;()</span><br><span class="line">    c += <span class="number">10</span></span><br><span class="line">    fmt.Printf(<span class="string">&quot;Test 1 in func: %v\n&quot;</span>, c)</span><br><span class="line">    <span class="keyword">defer</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">        c += <span class="number">10</span></span><br><span class="line">        fmt.Printf(<span class="string">&quot;Test 1 defer 2: %v\n&quot;</span>, c)</span><br><span class="line">        <span class="keyword">defer</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">            c += <span class="number">10</span></span><br><span class="line">        &#125;()</span><br><span class="line">    &#125;()</span><br><span class="line">    <span class="keyword">return</span> c</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">deferTest2</span><span class="params">()</span> <span class="params">(c <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">    c = <span class="number">10</span></span><br><span class="line">    <span class="keyword">defer</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">        c += <span class="number">10</span></span><br><span class="line">        fmt.Printf(<span class="string">&quot;Test 2 defer 1: %v\n&quot;</span>, c)</span><br><span class="line">        <span class="keyword">defer</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">            c += <span class="number">10</span></span><br><span class="line">        &#125;()</span><br><span class="line">    &#125;()</span><br><span class="line">    c += <span class="number">10</span></span><br><span class="line">    fmt.Printf(<span class="string">&quot;Test 2 in func: %v\n&quot;</span>, c)</span><br><span class="line">    <span class="keyword">defer</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">        c += <span class="number">10</span></span><br><span class="line">        fmt.Printf(<span class="string">&quot;Test 2 defer 2: %v\n&quot;</span>, c)</span><br><span class="line">        <span class="keyword">defer</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">            c += <span class="number">10</span></span><br><span class="line">        &#125;()</span><br><span class="line">    &#125;()</span><br><span class="line">    <span class="keyword">return</span> c</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">deferTest3</span><span class="params">()</span> *<span class="title">int</span></span> &#123;</span><br><span class="line">    c := <span class="number">10</span></span><br><span class="line">    <span class="keyword">defer</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">        c += <span class="number">10</span></span><br><span class="line">        fmt.Printf(<span class="string">&quot;Test 3 defer 1: %v\n&quot;</span>, c)</span><br><span class="line">        <span class="keyword">defer</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">            c += <span class="number">10</span></span><br><span class="line">        &#125;()</span><br><span class="line">    &#125;()</span><br><span class="line">    c += <span class="number">10</span></span><br><span class="line">    fmt.Printf(<span class="string">&quot;Test 3 in func: %v\n&quot;</span>, c)</span><br><span class="line">    <span class="keyword">defer</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">        c += <span class="number">10</span></span><br><span class="line">        fmt.Printf(<span class="string">&quot;Test 3 defer 2: %v\n&quot;</span>, c)</span><br><span class="line">        <span class="keyword">defer</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">            c += <span class="number">10</span></span><br><span class="line">        &#125;()</span><br><span class="line">    &#125;()</span><br><span class="line">    <span class="keyword">return</span> &amp;c</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    fmt.Printf(<span class="string">&quot;Test 1 return: %v\tret val not declared in definition\n&quot;</span>, deferTest1())</span><br><span class="line">    fmt.Printf(<span class="string">&quot;Test 2 return: %v\tret val declared in definition\n&quot;</span>, deferTest2())</span><br><span class="line">    fmt.Printf(<span class="string">&quot;Test 3 return: %v\tret val is the pointer\n&quot;</span>, *deferTest3())</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Test 1 in func: 20</span><br><span class="line">Test 1 defer 2: 30</span><br><span class="line">Test 1 defer 1: 50</span><br><span class="line">Test 1 return: 20       ret val not declared in definition</span><br><span class="line">Test 2 in func: 20</span><br><span class="line">Test 2 defer 2: 30</span><br><span class="line">Test 2 defer 1: 50</span><br><span class="line">Test 2 return: 60       ret val declared in definition</span><br><span class="line">Test 3 in func: 20</span><br><span class="line">Test 3 defer 2: 30</span><br><span class="line">Test 3 defer 1: 50</span><br><span class="line">Test 3 return: 60       ret val is the pointer</span><br></pre></td></tr></table></figure>
</section>
    <!-- Tags START -->
    
      <div class="tags">
        <span>Tags:</span>
        
  <a href="/tags#C" >
    <span class="tag-code">C</span>
  </a>

  <a href="/tags#Go" >
    <span class="tag-code">Go</span>
  </a>

  <a href="/tags#JavaScript" >
    <span class="tag-code">JavaScript</span>
  </a>

      </div>
    
    <!-- Tags END -->
    <!-- NAV START -->
    
  <div class="nav-container">
    <!-- reverse left and right to put prev and next in a more logic postition -->
    
      <a class="nav-left" href="/2021/code-convention/">
        <span class="nav-arrow">← </span>
        
          编写约定
        
      </a>
    
    
      <a class="nav-right" href="/2021/brainfuck-compiler/">
        
          Compiler for Brainfuck
        
        <span class="nav-arrow"> →</span>
      </a>
    
  </div>

    <!-- NAV END -->
    
      <!-- Utterances START -->
      <div id="utterances"></div>
      <script src="https://utteranc.es/client.js"
        repo="bLueriVerLHR/bLueriVerLHR.github.io"
        issue-term="pathname"
        theme="github-light"
        crossorigin="anonymous"
        async></script>    
      <!-- Utterances END -->
    
  </article>
  <!-- Article END -->
  <!-- Catalog START -->
  
    <aside class="catalog-container">
  <div class="toc-main">
    <strong class="toc-title">Catalog</strong>
    
      <ol class="toc-nav"><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#C-%E8%A7%A3%E5%A4%9A%E5%85%83%E4%B8%80%E6%AC%A1%E6%96%B9%E7%A8%8B%E7%BB%84"><span class="toc-nav-text">C-解多元一次方程组</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#C-EPUB%E6%96%87%E4%BB%B6%E5%88%B6%E4%BD%9C%E6%A1%86%E6%9E%B6"><span class="toc-nav-text">C-EPUB文件制作框架</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#C-%E4%B8%8D%E6%BA%A2%E5%87%BA%E7%9A%84%E4%B9%98%E6%B3%95"><span class="toc-nav-text">C-不溢出的乘法</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#C-%E6%95%B0%E5%AD%97%E7%82%B8%E5%BC%B9"><span class="toc-nav-text">C-数字炸弹</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#Go-%E6%A1%86%E6%9E%B6Gin%E7%9A%84%E7%AE%80%E5%8D%95%E8%BF%90%E7%94%A8"><span class="toc-nav-text">Go-框架Gin的简单运用</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#db-json"><span class="toc-nav-text">db.json</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#post-json"><span class="toc-nav-text">post.json</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#Source-Code"><span class="toc-nav-text">Source Code</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#JavaScript-%E9%97%AD%E5%8C%85-amp-%E8%AE%B0%E5%BF%86%E5%87%BD%E6%95%B0"><span class="toc-nav-text">JavaScript-闭包&amp;记忆函数</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#Go-%E5%85%B3%E9%94%AE%E5%AD%97defer%E6%B5%8B%E8%AF%95"><span class="toc-nav-text">Go-关键字defer测试</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#Test-Code-1"><span class="toc-nav-text">Test Code 1</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#Test-Code-2"><span class="toc-nav-text">Test Code 2</span></a></li></ol></li></ol>
    
  </div>
</aside>
  
  <!-- Catalog END -->
</main>

<script>
  (function () {
    var url = 'https://blueriverlhr.github.io/2021/code-demo/';
    var banner = ''
    if (banner !== '' && banner !== 'undefined' && banner !== 'null') {
      $('#article-banner').css({
        'background-image': 'url(' + banner + ')'
      })
    } else {
      $('#article-banner').geopattern(url)
    }
    $('.header').removeClass('fixed-header')

    // error image
    $(".markdown-content img").on('error', function() {
      $(this).attr('src', '/css/images/error_icon.png')
      $(this).css({
        'cursor': 'default'
      })
    })

    // zoom image
    $(".markdown-content img").on('click', function() {
      var src = $(this).attr('src')
      if (src !== '/css/images/error_icon.png') {
        var imageW = $(this).width()
        var imageH = $(this).height()

        var zoom = ($(window).width() * 0.95 / imageW).toFixed(2)
        zoom = zoom < 1 ? 1 : zoom
        zoom = zoom > 2 ? 2 : zoom
        var transY = (($(window).height() - imageH) / 2).toFixed(2)

        $('body').append('<div class="image-view-wrap"><div class="image-view-inner"><img src="'+ src +'" /></div></div>')
        $('.image-view-wrap').addClass('wrap-active')
        $('.image-view-wrap img').css({
          'width': `${imageW}`,
          'transform': `translate3d(0, ${transY}px, 0) scale3d(${zoom}, ${zoom}, 1)`
        })
        $('html').css('overflow', 'hidden')

        $('.image-view-wrap').on('click', function() {
          $(this).remove()
          $('html').attr('style', '')
        })
      }
    })
  })();
</script>


  <script>
    var qr = new QRious({
      element: document.getElementById('share-qrcode'),
      value: document.location.href
    });
  </script>






    <div class="scroll-top">
  <span class="arrow-icon"></span>
</div>
    <footer class="app-footer">
  <p class="copyright">
    &copy; 2021 | bLueriVerLHR in GitHub
    <br>
    Proudly powered by <a href="https://hexo.io" target="_blank">Hexo</a>
    <br>
    Theme by <a target="_blank" rel="noopener" href="https://github.com/yanm1ng">yanm1ng</a>
  </p>
</footer>

<script>
  function async(u, c) {
    var d = document, t = 'script',
      o = d.createElement(t),
      s = d.getElementsByTagName(t)[0];
    o.src = u;
    if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
    s.parentNode.insertBefore(o, s);
  }
</script>
<script>
  async("//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js", function(){
    FastClick.attach(document.body);
  })
</script>

<script>
  var hasLine = 'true';
  async("//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js", function(){
    $('figure pre').each(function(i, block) {
      var figure = $(this).parents('figure');
      if (hasLine === 'false') {
        figure.find('.gutter').hide();
      }
      hljs.configure({useBR: true});
      var lang = figure.attr('class').split(' ')[1] || 'code';
      var codeHtml = $(this).html();
      var codeTag = document.createElement('code');
      codeTag.className = lang;
      codeTag.innerHTML = codeHtml;
      $(this).attr('class', '').empty().html(codeTag);
      figure.attr('data-lang', lang.toUpperCase());
      hljs.highlightBlock(block);
    });
  })
</script>
<!-- Baidu Tongji -->


<script src="/js/script.js"></script>


  </body>
</html>
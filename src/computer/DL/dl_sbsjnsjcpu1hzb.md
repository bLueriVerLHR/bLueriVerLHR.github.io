> 《手把手教你设计 CPU —— RISC-V 处理器篇》
> 第一版
> 胡振波编著
> 人民邮电出版社

# CPU 与 RISC-V 综述

## CPU 历史

### 各类 CPU

CPU，全称为中央处理器单元（Central Processing Unit），简称为处理器。

> 注意区分“处理器”和“处理器核”，“CPU”和“Core”的概念。严格来说，“处理器核”和“Core”是指处理器内部最核心的部分，是真正的处理器内核；而“处理器”和“CPU”往往是一个完整的 SoC，包含了处理器内核和其他的设备或者存储器。

指令集架构（Instruction Set Architecture，ISA）是 CPU 的灵魂，也是区分 CPU 的主要标准。

指令集，顾名思义是一组指令的集合，而指令是指处理器进行操作的最小单元（譬如加减乘除操作或者读/写存储器数据）。

指令集架构，有时简称为“架构”或者称为“处理器架构”。有了指令集架构，便可以使用不同的处理器硬件实现方案来设计不同性能的处理器。

处理器的具体硬件实现方案被称为微架构（Microarchitecture）。

指令集架构可以理解为一个抽象层，使得软件无须做任何修改便可以完全运行在任何一款遵循同一指令集架构实现的处理器上，虽然微架构可能不一样。

> 就像在计算机上设计了一组接口，程序员只需要进行调用而不需要关心其底层如何实现。接口的行为被规范所规定，应当每一种实现都能实现一样的效果，这样任何支持同一组接口的计算机都可以运行使用该接口的代码。

指令集架构不仅仅是一组指令的集合，它还要定义任何软件程序员需要了解的硬件信息，包括支持的数据类型、存储器（Memory）、寄存器状态、寻址模式和存储器模型等。

指令集架构主要分为复杂指令集（Complex Instruction Set Computer，CISC）和精简指令集（Reduced Instruction Set Computer，RISC）。

以上两者有如下区别：

- CISC 不仅包含了处理器的常用的指令，还包含许多不常用的特殊指令。其指令数目比较多，所以称为复杂指令集。
- RISC 只包含处理器常用的指令，而对于不常用的操作，则通过执行多条常用指令的方式来达到同样的效果。由于其指令数目比较精简，所以称为精简指令集。

除了 CISC 与 RISC 之分，处理器指令集架构的位数也是一个重要的概念。通俗来说，处理器架构的位数是指通用寄存器的宽度，其决定了寻址范围的大小、数据运算能力的强弱。

例如32位架构的处理器，其通用寄存器的宽度为32位，能够寻址的范围为 `2^32`，即 4GB 的寻址空间，运算指令可以操作的操作数为 32位。

> 注意：处理器指令集架构的宽度和指令的编码长度无任何关系！

总上述，在不考虑任何实际成本和实现技术的前提下，理论上来讲：

- 通用寄存器的宽度，即指令集架构的位数越多越好。
- 指令编码的长度越短越好，这样可以节省代码的存储空间。

比较知名的几个指令集架构：

1. x86
2. SPARC
3. MIPS
4. Power
5. Alpha
6. ARM
7. ARC
8. Andes
9. C-Sky